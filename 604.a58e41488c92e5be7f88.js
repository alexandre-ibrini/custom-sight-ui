"use strict";(self.webpackChunkros_fe_poc=self.webpackChunkros_fe_poc||[]).push([[604],{4991:(C,g,l)=>{l.d(g,{i:()=>D});var _=l(7728),s=l(3414),d=l(3679),v=l(2238),t=l(7716),p=l(3065),h=l(7493),T=l(7965);let w=(()=>{class c{constructor(n,r,u,E,A,N){this.dialogRef=n,this.data=r,this.store=u,this.jwtService=E,this.changeDetector=A,this.alertService=N,this.isUpdating=!1,this.isRequestSent=!1,this.accountForm=new d.cw({}),this.formFields=[{displayName:"Username",fieldName:"username",placeholder:"Username",fieldState:"value 1",validators:[d.kI.required]},{displayName:"Password",fieldName:"password",placeholder:"Password",fieldState:"",validators:[d.kI.required,d.kI.minLength(8),_.b.getPasswordValidator()]},{displayName:"First Name",fieldName:"firstName",placeholder:"First Name",fieldState:"value 1",validators:[d.kI.required]},{displayName:"Last name",fieldName:"lastName",placeholder:"Last Name",fieldState:"value",validators:[d.kI.required]},{fieldName:"email",displayName:"Email",placeholder:"Email",fieldState:"value 1",validators:[d.kI.required,d.kI.email]},{displayName:"Phone Number",fieldName:"phoneNumber",placeholder:"Phone Number",fieldState:"value",validators:[d.kI.required,_.b.getPhoneValidator()]},{displayName:"Address",fieldName:"address",placeholder:"Address",fieldState:"value address",validators:[d.kI.required]},{displayName:"Role",fieldName:"role",placeholder:"Role",fieldState:"value address",validators:[d.kI.required,d.kI.pattern("^Admin|User$")]}],this.roleSelectValue="",this.roles=["Admin","User"],this.isEditUser=!0,this.isPasswordVisible=!1,this.subscriptions=[],this.isDoneInit=!1}ngOnInit(){var n;this.changeDetector.detectChanges(),this.isEditUser=this.data.isEditUser,this.isUpdating=!1,this.isRequestSent=!1,this.isEditUser&&this.formFields.splice(this.formFields.findIndex(r=>"password"===r.fieldName),1),this.formFields.forEach(r=>{this.accountForm.addControl(r.fieldName,new d.NI({value:"",disabled:this.isEditUser&&"username"===r.fieldName},r.validators))}),this.setFormGroupValueFromUserModel(null===(n=this.data)||void 0===n?void 0:n.user),this.changeDetector.detectChanges(),this.isDoneInit=!0}togglePassword(){this.isPasswordVisible=!this.isPasswordVisible}saveChanges(){var n,r;this.accountForm.valid?(this.data.saveTrigger({username:this.getFieldValue("username"),id:(null===(r=null===(n=this.data)||void 0===n?void 0:n.user)||void 0===r?void 0:r.id)?this.data.user.id:-1,email:this.getFieldValue("email"),firstName:this.getFieldValue("firstName"),lastName:this.getFieldValue("lastName"),phoneNumber:this.getFieldValue("phoneNumber"),address:this.getFieldValue("address"),role:this.getFieldValue("role"),password:this.getFieldValue("password"),dateModified:Date.now(),dateCreated:Date.now(),isDeactivated:!1}),this.isRequestSent=!0):this.alertService.openAlert("Form Invalid","All fields should be validated",null,"FATAL")}cancelChanges(){this.close()}findPlaceholder(n){return this.formFields.find(r=>r.fieldName===n).placeholder}getFieldValue(n){var r,u;return null===(u=null===(r=this.accountForm)||void 0===r?void 0:r.controls[n])||void 0===u?void 0:u.value}setFormGroupValueFromUserModel(n){this.isRequestSent=!0,this.accountForm.patchValue({username:null==n?void 0:n.username,email:null==n?void 0:n.email,firstName:null==n?void 0:n.firstName,lastName:null==n?void 0:n.lastName,phoneNumber:null==n?void 0:n.phoneNumber,address:null==n?void 0:n.address,role:null==n?void 0:n.role}),this.roleSelectValue=null==n?void 0:n.role}checkIfMobile(){return _.b.checkIfMobile()}getFieldErrorCode(n){return s.L.get(n)}ngOnDestroy(){}close(){this.dialogRef.close()}}return c.\u0275fac=function(n){return new(n||c)(t.Y36(v.so),t.Y36(v.WI),t.Y36(p.yh),t.Y36(h.T),t.Y36(t.sBO),t.Y36(T.Q))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-edit-user-dialog"]],decls:0,vars:0,template:function(n,r){},styles:['.edit-user[_ngcontent-%COMP%]  .mat-select-value-text{color:#000}@keyframes spinner{to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #ffffff;border-top-color:#000;animation:spinner .8s linear infinite}']}),c})(),D=(()=>{class c{constructor(n){this.dialog=n}openDialog(n,r,u){this.dialogRef=this.dialog.open(w,{data:{user:n,isEditUser:r,saveTrigger:u}})}}return c.\u0275fac=function(n){return new(n||c)(t.LFG(v.uw))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},7728:(C,g,l)=>{l.d(g,{b:()=>s});var _=l(3679);let s=(()=>{class d{static controlType(t){let p="";switch(t){case"text":case"phone":case"email":case"date":case"time":case"number":case"textarea":p="simple";break;default:return t}return p}static mapSurvey(t){const p=[];return p.push(t.Form),t.Form=p,t}static checkIfMobile(){return navigator.userAgent.match(/(iPhone|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini)/i)}static checkIfIpad(){return navigator.userAgent.match(/(iPad)/i)}static getPhoneValidator(){return _.kI.pattern("(\\(?([\\d \\-\\)\\\u2013\\+\\/\\(]+){10,}\\)?([ .\\-\u2013\\/]?)([\\d]+))")}static getPasswordValidator(){return _.kI.pattern("^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\\s).{8,}$")}}return d.profile={Uid:"",FullName:""},d})()},3414:(C,g,l)=>{l.d(g,{L:()=>_});const _=(new Map).set("username","Username Already taken").set("password","Password should be at least 8 characters long and contain a number and a special character.").set("firstName","First name is required").set("lastName","Last name is required").set("email","Invalid email").set("phoneNumber","Invalid phone number format").set("address","Address is required").set("role","Role is required or is invalid")},6604:(C,g,l)=>{l.d(g,{Q:()=>$});var _=l(9692),s=l(2789),d=l(9083),t=l(7716),p=l(4991),h=l(8583),T=l(7093),w=l(1095),D=l(1436);function c(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).downloadAll()}),t._uU(2,"Download All"),t.qZA(),t.qZA()}}function x(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).AddUser()}),t._uU(2,"Add User"),t.qZA(),t.qZA()}}function n(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).reloadButtonTrigger()}),t._uU(2,"Reload"),t.qZA(),t.qZA()}}function r(a,i){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.name)}}function u(a,i){if(1&a&&(t.TgZ(0,"th",16),t.YNc(1,r,2,1,"span",7),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","payload"!==e.id&&"userData"!==e.id)}}const E=function(a){return[a]};function A(a,i){if(1&a&&(t.ynx(0),t._UZ(1,"i",18),t.BQk()),2&a){const e=t.oxw().$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(1,E,o.expandedElement===e?"bi-chevron-contract":"bi-chevron-expand"))}}function N(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(){t.CHM(e);const m=t.oxw().$implicit;return t.oxw(3).download(m.name)}),t._uU(2,"Download"),t.qZA(),t.BQk()}}function y(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(){t.CHM(e);const m=t.oxw().$implicit,f=t.oxw().$implicit,b=t.oxw(2);return null==b.buttonTriggers[f.id]?null:b.buttonTriggers[f.id].trigger(m.id)}),t._uU(2),t.qZA(),t.BQk()}if(2&a){const e=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(null==o.buttonTriggers[e.id]?null:o.buttonTriggers[e.id].buttonName)}}const M=function(a,i){return{color:a,"background-color":i}};function F(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"span",19),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngStyle",t.WLB(2,M,o.badge.badgeColorRule(e[o.id]),o.badge.badgeBackgroundColorRule(e[o.id]))),t.xp6(1),t.hij(" ",o.badge.badgeValueRule(e[o.id])," ")}}const P=function(a){return{"font-weight":a}};function Z(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(2,P,o.bold?"bold":null)),t.xp6(1),t.hij(" ",e[o.id]," ")}}function O(a,i){if(1&a&&(t.TgZ(0,"td",17),t.YNc(1,A,2,3,"ng-container",7),t.YNc(2,N,3,0,"ng-container",7),t.YNc(3,y,3,1,"ng-container",7),t.YNc(4,F,3,5,"ng-container",7),t.YNc(5,Z,3,4,"ng-container",7),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","expand"===e.id),t.xp6(1),t.Q6J("ngIf",e.button&&"download"===e.id),t.xp6(1),t.Q6J("ngIf",e.button&&"download"!==e.id),t.xp6(1),t.Q6J("ngIf",e.badge&&!0===e.badge.badgeCell&&!e.button&&"payload"!==e.id&&"userData"!==e.id),t.xp6(1),t.Q6J("ngIf",(!e.badge||e.badge&&!1===e.badge.badgeCell)&&!e.button&&"payload"!==e.id&&"userData"!==e.id)}}function U(a,i){1&a&&(t.ynx(0,13),t.YNc(1,u,2,1,"th",14),t.YNc(2,O,6,5,"td",15),t.BQk()),2&a&&t.Q6J("matColumnDef",i.$implicit.id)}function k(a,i){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"div",22),t.TgZ(2,"div",23),t.TgZ(3,"span"),t._uU(4,"Payload"),t.qZA(),t.qZA(),t.TgZ(5,"div",23),t.TgZ(6,"span"),t._uU(7,"UserData"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit,o=t.oxw(3);t.Q6J("@detailExpand",e==o.expandedElement?"expanded":"collapsed")}}function B(a,i){if(1&a&&(t.TgZ(0,"td",17),t.YNc(1,k,8,1,"div",7),t.qZA()),2&a){const e=i.$implicit,o=t.oxw(3);t.uIk("colspan",null==o.displayedColumns?null:o.displayedColumns.length),t.xp6(1),t.Q6J("ngIf",e===o.expandedElement)}}function S(a,i){1&a&&(t.ynx(0),t.ynx(1,21),t.YNc(2,B,2,2,"td",15),t.BQk(),t.BQk())}function R(a,i){1&a&&t._UZ(0,"tr",24)}const Q=function(a){return{cursor:a}};function I(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const f=t.CHM(e).$implicit,b=t.oxw(2);return b.expandedElement=b.expandedElement===f?null:f,b.rowClicked(f)}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,Q,e.areColumnsExpandable?"pointer":"default"))("matTooltip",e.areColumnsExpandable?"Click to expand":"")}}function L(a,i){1&a&&t._UZ(0,"tr",27)}const J=function(){return["expandedDetail"]};function q(a,i){1&a&&(t.ynx(0),t.YNc(1,L,1,0,"tr",26),t.BQk()),2&a&&(t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(1,J)))}const Y=function(){return[5,10,20]};function V(a,i){if(1&a&&(t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.YNc(5,c,3,0,"div",4),t.YNc(6,x,3,0,"div",4),t.YNc(7,n,3,0,"div",4),t.qZA(),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"table",5),t.YNc(10,U,3,1,"ng-container",6),t.YNc(11,S,3,0,"ng-container",7),t.YNc(12,R,1,0,"tr",8),t.YNc(13,I,1,4,"tr",9),t.YNc(14,q,2,2,"ng-container",7),t.qZA(),t._UZ(15,"mat-paginator",10),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(4),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",e.showDownloadAllButton),t.xp6(1),t.Q6J("ngIf",e.showAddUserButton),t.xp6(1),t.Q6J("ngIf",e.showReloadButton),t.xp6(2),t.Q6J("dataSource",e.dataSource)("multiTemplateDataRows",e.areColumnsExpandable),t.xp6(1),t.Q6J("ngForOf",e.columns),t.xp6(1),t.Q6J("ngIf",e.areColumnsExpandable),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("ngIf",e.areColumnsExpandable),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(12,Y))}}let $=(()=>{class a{constructor(e){this.editUserDialogService=e,this.ELEMENT_DATA=[],this.showReloadButton=!1,this.columns=[],this.showDownloadAllButton=!1,this.showAddUserButton=!1,this.areColumnsExpandable=!1,this.namePrefix="system_logs/"}ngOnInit(){var e;this.dataSource=new s.by(this.ELEMENT_DATA),this.displayedColumns=null===(e=this.columns)||void 0===e?void 0:e.map(o=>o.id)}ngAfterViewInit(){this.dataSource.paginator=this.paginator}setTableData(e){(0,d.diff)(e,this.dataSource.data)&&(this.dataSource=new s.by(e),this.dataSource.paginator=this.paginator)}download(e){[].push(this.namePrefix+e)}downloadAll(){}AddUser(){this.editUserDialogService.openDialog(null,!1,e=>{})}getColumnById(e){return this.columns.find(o=>o.id===e)}rowClicked(e){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.i))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-data-table"]],viewQuery:function(e,o){if(1&e&&t.Gf(_.NW,5),2&e){let m;t.iGM(m=t.CRH())&&(o.paginator=m.first)}},inputs:{ELEMENT_DATA:"ELEMENT_DATA",showReloadButton:"showReloadButton",reloadButtonTrigger:"reloadButtonTrigger",columns:"columns",title:"title",showDownloadAllButton:"showDownloadAllButton",buttonTriggers:"buttonTriggers",showAddUserButton:"showAddUserButton",areColumnsExpandable:"areColumnsExpandable"},decls:1,vars:1,consts:[["class","data-table","style","border-radius: 16px;\n                              background-color: #FFFFFF;\n                              box-shadow: 0 0 1px rgba(12, 26, 75, 0.24), 0 3px 8px -1px rgba(50, 50, 71, 0.05); width: 100%;",4,"ngIf"],[1,"data-table",2,"border-radius","16px","background-color","#FFFFFF","box-shadow","0 0 1px rgba(12, 26, 75, 0.24), 0 3px 8px -1px rgba(50, 50, 71, 0.05)","width","100%"],[2,"height","56px","line-height","56px","padding","0 24px 0 24px","font-size","14px"],["fxLayout","row","fxLayoutAlign","space-between"],["fxLayoutAlign","center center",4,"ngIf"],["mat-table","",2,"width","100%",3,"dataSource","multiTemplateDataRows"],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngStyle","matTooltip","click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",2,"position","relative",3,"pageSizeOptions"],["fxLayoutAlign","center center"],["mat-stroked-button","",2,"margin-right","10px","margin-left","auto","display","block","font-size","11px","font-weight","bold","color","#16192C",3,"click"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["matTooltip","Expand to see more info",1,"bi",2,"cursor","pointer",3,"ngClass"],[1,"table-badge",3,"ngStyle"],[3,"ngStyle"],["matColumnDef","expandedDetail"],["fxLayout","row","fxLayoutAlign","space-around center"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","16px",2,"height","100%"],["mat-header-row",""],["mat-row","",3,"ngStyle","matTooltip","click"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"example-detail-row"]],template:function(e,o){1&e&&t.YNc(0,V,16,13,"div",0),2&e&&t.Q6J("ngIf",o.dataSource)},directives:[h.O5,T.xw,T.Wh,s.BZ,h.sg,s.as,s.nj,_.NW,w.lW,s.w1,s.fO,s.Dz,s.ge,s.ev,D.gM,h.mk,h.PC,T.SQ,s.XQ,s.Gk],styles:[".data-table[_ngcontent-%COMP%]{word-break:break-all!important}.data-table[_ngcontent-%COMP%]  .example-detail-row{height:0!important}.data-table[_ngcontent-%COMP%]  .mat-table thead{background-color:#fafafb}.data-table[_ngcontent-%COMP%]  .mat-header-cell{text-transform:uppercase;font-size:11px;font-weight:600;color:#8492a6;border-color:#edf2f7!important;border-top:1px solid #EDF2F7}.data-table[_ngcontent-%COMP%]  tr.mat-header-row{height:56px}.data-table[_ngcontent-%COMP%]  td.mat-cell{color:#425466;font-size:14px;border-color:#edf2f7;min-width:0!important}.data-table[_ngcontent-%COMP%]  .mat-list-item-content{color:#425466;font-size:14px;min-width:0!important}.data-table[_ngcontent-%COMP%]  tr.mat-row{height:52px}.data-table[_ngcontent-%COMP%]  .mat-paginator-page-size{margin-left:14px!important;margin-right:auto!important;line-height:56px}.data-table[_ngcontent-%COMP%]  .mat-paginator-range-label{position:absolute;left:225px}.data-table[_ngcontent-%COMP%]  .mat-paginator{border-bottom-left-radius:16px;border-bottom-right-radius:16px;color:#1f2d3d}.data-table[_ngcontent-%COMP%]  .mat-form-field-appearance-legacy .mat-form-field-infix{border:1px solid #EDF2F7;border-radius:4px;box-shadow:1px 1px 2px #32324733}.data-table[_ngcontent-%COMP%]  .mat-paginator-page-size .mat-select-trigger{padding:0 8px;line-height:17px;height:17px}.data-table[_ngcontent-%COMP%]  .mat-select-value-text, .data-table[_ngcontent-%COMP%]  .mat-select-arrow{color:#b5b5bd}.data-table[_ngcontent-%COMP%]  .mat-form-field-appearance-legacy .mat-form-field-underline{display:none}.data-table[_ngcontent-%COMP%]  .mat-paginator-page-size-select{margin-left:28px!important}.data-table[_ngcontent-%COMP%]  .mat-stroked-button{line-height:27px!important}@media screen and (max-width: 479px){.data-table[_ngcontent-%COMP%]  .mat-paginator-range-actions{width:100%}.data-table[_ngcontent-%COMP%]  .mat-paginator-range-label{position:relative;left:auto}}"]}),a})()}}]);