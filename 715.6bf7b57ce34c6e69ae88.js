"use strict";(self.webpackChunkideal_app=self.webpackChunkideal_app||[]).push([[715],{3715:(Oi,rt,a)=>{a.r(rt),a.d(rt,{SystemStatusModule:()=>Li});var lt=a(5987),Ot=a(3772),ct=a(4583),t=a(7716),ut=a(4812),dt=a(8359),l=a(3065),qt=a(1327),pt=a(5939),u=a(5618),f=a(8583),S=(()=>{return(i=S||(S={})).FATAL="FATAL",i.RECOVERABLE="RECOVERABLE",i.WARNING="WARNING",S;var i})(),It=a(1731),Rt=a(5810),mt=a(8658),Et=a(2178);let Ut=(()=>{class i{constructor(e){this.store=e,this.subscriptions=[]}ngOnInit(){this.store.dispatch((0,mt.iv)()),this.subscriptions.push(this.store.select(Rt.P6).subscribe(e=>{e&&(this.value=e)}))}ngOnDestroy(){this.store.dispatch((0,mt.SD)()),this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-disk-usage-graph"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","16px",1,"disk-usage-graph"],["fxLayoutAlign","start center",2,"white-space","nowrap","width","100%","font-weight","700","font-size","18px"],["fxLayoutAlign","space-between center","fxLayout","row",2,"width","100%"],[2,"font-size","14px","color","#84859E"],["color","accent","mode","determinate",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3," Disk usage"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"span",3),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"mat-progress-bar",4),t.qZA()),2&e&&(t.xp6(6),t.hij("",null==n.value?null:n.value.toFixed(2),"%"),t.xp6(1),t.Q6J("value",n.value))},directives:[u.xw,u.Wh,u.SQ,Et.pW],styles:[".mat-progress-bar[_ngcontent-%COMP%]{border-radius:20px;height:8px}.disk-usage-graph[_ngcontent-%COMP%]  .mat-progress-bar.mat-accent .mat-progress-bar-fill:after{border-radius:20px!important}"]}),i})();var Nt=a(4378),Qt=a(2984),Jt=a(2156),ht=a(6526),ft=a(1897),vt=a(1445),gt=a(9687);let Pt=(()=>{class i{constructor(e){this.store=e,this.title=new t.IIB,this.id=new t.IIB,this.subscriptions=[],this.PieChartOption={backgroundColor:"#FFFFFF",tooltip:{trigger:"item"},legend:{show:!0,bottom:"0",left:"center",data:["Charge","Empty"],icon:"circle",itemGap:100,formatter:n=>{var s,r;return"{a|"+("Empty"!==n?(null===(r=null===(s=this.PieChartOption)||void 0===s?void 0:s.series[0].data.find(c=>c.name===n))||void 0===r?void 0:r.value)+" "+this.getMeasurementName()+"}\n":"}")+"{b|"+n+"}"},itemStyle:{size:8},textStyle:{fontFamily:"MarkPro",rich:{a:{align:"right",fontWeight:700,fontSize:12},b:{align:"right",fontWeight:400,fontSize:10}}}},series:[{type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,legendHoverLink:!0,label:{show:!1,position:"center",emphasis:{show:!0,fontSize:"16",fontWeight:"normal",color:"gray",formatter:""}},labelLine:{show:!0},data:[{name:"Charge",value:0,itemStyle:{color:"#7772FD"},emphasis:{itemStyle:{color:"#7772FD"}}},{name:"Empty",value:100,itemStyle:{color:"#E4ECF7"},emphasis:{itemStyle:{color:"#E4ECF7"}}}]}]}}initChart(e){this.chatInstance=e,this.chatInstance.setOption(this.PieChartOption)}ngOnInit(){switch(this.id){case"SOC":this.store.dispatch((0,ht.YN)()),this.subscriptions.push(this.store.select(Qt.EF).subscribe(e=>{e&&this.setPieDataAndUpdateChart(e)}));break;case"V":this.store.dispatch((0,ft.$M)()),this.subscriptions.push(this.store.select(Jt.WT).subscribe(e=>{e&&this.setPieDataAndUpdateChart(e)}));break;case"C":this.store.dispatch((0,vt.tO)()),this.subscriptions.push(this.store.select(Nt.zr).subscribe(e=>{e&&this.setPieDataAndUpdateChart(e)}))}}getMeasurementName(){switch(this.id){case"SOC":return"";case"V":return"volts";case"C":return"amps"}}ngOnDestroy(){switch(this.id){case"SOC":this.store.dispatch((0,ht.Wc)());break;case"V":this.store.dispatch((0,ft.Y0)());break;case"C":this.store.dispatch((0,vt._v)())}this.subscriptions.forEach(e=>{e.unsubscribe()})}setPieDataAndUpdateChart(e){this.PieChartOption.series[0].data[0].value=e.toFixed(3),this.PieChartOption.series[0].data[1].value=Number((100-e).toFixed(3)),this.chatInstance.setOption(this.PieChartOption)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-overview-graph"]],inputs:{title:"title",id:"id"},decls:5,vars:3,consts:[["fxLayout","column",2,"height","286px"],["fxLayoutAlign","start center"],[1,"component-title"],["echarts","","autoResize","",3,"options","theme","chartInit"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.NdJ("chartInit",function(r){return n.initChart(r)}),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(n.title),t.xp6(1),t.Q6J("options",n.PieChartOption)("theme","light"))},directives:[u.xw,u.Wh,gt._w],styles:[""]}),i})();var bt=a(1436);function Gt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().openMoreInfoDialog()}),t.qZA()}}function Vt(i,o){1&i&&t._UZ(0,"i",10)}function Yt(i,o){1&i&&t._UZ(0,"i",11)}function Wt(i,o){1&i&&t._UZ(0,"i",12)}let zt=(()=>{class i{constructor(e){this.alertService=e,this.title="Warning!"}openMoreInfoDialog(){this.alertService.openAlert(this.title,"Component : "+this.component,["Description : "+this.description,"Proposed Solution : "+this.proposedSolution],this.event.event.severity)}ngOnInit(){var e,n,s,r,c,p,m;this.event&&(this.title=null===(n=null===(e=this.event)||void 0===e?void 0:e.event)||void 0===n?void 0:n.severity,this.description=null===(r=null===(s=this.event)||void 0===s?void 0:s.event)||void 0===r?void 0:r.description,this.component=null===(c=this.event)||void 0===c?void 0:c.component,this.proposedSolution=null===(m=null===(p=this.event)||void 0===p?void 0:p.event)||void 0===m?void 0:m.proposed_solution)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ut.Q))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-warning-card"]],inputs:{description:"description",event:"event"},decls:11,vars:7,consts:[["class","bi bi-info-circle-fill","matTooltip","More Info","style","cursor: pointer;",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutGap","18px",2,"cursor","pointer",3,"click"],["fxLayoutAlign","center center","fxLayout","column",2,"width","100%"],["class","bi bi-asterisk asterisk-icon","style","color: #A6B7D4",4,"ngIf"],["class","bi bi-exclamation-lg asterisk-icon","style","color:#ffba7d",4,"ngIf"],["class","bi bi-x-lg state-icon asterisk-icon","style","color: #ff7d7d",4,"ngIf"],["fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","5px",3,"matTooltip"],[2,"font-weight","700","font-size","18px","color","#425466"],[2,"font-weight","400","font-size","12px","color","#425466","text-align","center","max-width","360px","text-overflow","ellipsis","overflow","hidden","white-space","nowrap"],["matTooltip","More Info",1,"bi","bi-info-circle-fill",2,"cursor","pointer",3,"click"],[1,"bi","bi-asterisk","asterisk-icon",2,"color","#A6B7D4"],[1,"bi","bi-exclamation-lg","asterisk-icon",2,"color","#ffba7d"],[1,"bi","bi-x-lg","state-icon","asterisk-icon",2,"color","#ff7d7d"]],template:function(e,n){1&e&&(t.YNc(0,Gt,1,0,"i",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return n.openMoreInfoDialog()}),t.TgZ(2,"div",2),t.YNc(3,Vt,1,0,"i",3),t.YNc(4,Yt,1,0,"i",4),t.YNc(5,Wt,1,0,"i",5),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"span",7),t._uU(8),t.qZA(),t.TgZ(9,"span",8),t._uU(10),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngIf",n.event),t.xp6(3),t.Q6J("ngIf","WARNING"!==n.title&&"ERROR"!==n.title),t.xp6(1),t.Q6J("ngIf","WARNING"===n.title),t.xp6(1),t.Q6J("ngIf","ERROR"===n.title),t.xp6(1),t.Q6J("matTooltip",n.description),t.xp6(2),t.Oqu(n.title),t.xp6(2),t.Oqu(n.description))},directives:[f.O5,u.xw,u.SQ,u.Wh,bt.gM],styles:[".asterisk-icon[_ngcontent-%COMP%]{background:#FFFFFF;font-size:25px;padding:17px;color:#a6b7d4;border-radius:50%}"]}),i})(),jt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-event-warnings"]],inputs:{event:"event"},decls:2,vars:1,consts:[["fxLayoutAlign","center center",2,"background","transparent !important"],[2,"width","100% !important",3,"event"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-warning-card",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("event",null==n.event?null:n.event.value))},directives:[u.Wh,zt],styles:[""]}),i})();function Xt(i,o){if(1&i&&(t.TgZ(0,"div",3),t._UZ(1,"app-overview-graph",5),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("title",e.title)("id",e.id)}}function Ht(i,o){if(1&i&&(t.TgZ(0,"div",6),t._UZ(1,"app-event-warnings",7),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("event",e)}}let Kt=(()=>{class i{constructor(e){this.store=e,this.subscriptions=[],this.graphs=[{id:"SOC",title:"State of charge"},{id:"V",title:"Voltage"},{id:"C",title:"Current"}]}checkForChangeInEvents(e){var n,s,r,c,p,m,v,g,h,b,T,_,J,P,G,V,Y,W,z,j,X,H,K,$,tt,et,it,nt,st,ot,at;if((!this.events||0===(null===(n=Object.keys(this.events))||void 0===n?void 0:n.length))&&e||(null===(s=Object.keys(this.events))||void 0===s?void 0:s.length)!=(null===(r=Object.keys(e))||void 0===r?void 0:r.length))return!0;for(let y in this.events)return!e[y]||(null===(p=null===(c=this.events[y])||void 0===c?void 0:c.event)||void 0===p?void 0:p.component)!==(null===(v=null===(m=e[y])||void 0===m?void 0:m.event)||void 0===v?void 0:v.component)||(null===(b=null===(h=null===(g=this.events[y])||void 0===g?void 0:g.event)||void 0===h?void 0:h.event)||void 0===b?void 0:b.code)!==(null===(J=null===(_=null===(T=e[y])||void 0===T?void 0:T.event)||void 0===_?void 0:_.event)||void 0===J?void 0:J.code)||(null===(V=null===(G=null===(P=this.events[y])||void 0===P?void 0:P.event)||void 0===G?void 0:G.event)||void 0===V?void 0:V.description)!==(null===(z=null===(W=null===(Y=e[y])||void 0===Y?void 0:Y.event)||void 0===W?void 0:W.event)||void 0===z?void 0:z.description)||(null===(H=null===(X=null===(j=this.events[y])||void 0===j?void 0:j.event)||void 0===X?void 0:X.event)||void 0===H?void 0:H.proposed_solution)!==(null===(tt=null===($=null===(K=e[y])||void 0===K?void 0:K.event)||void 0===$?void 0:$.event)||void 0===tt?void 0:tt.proposed_solution)||(null===(nt=null===(it=null===(et=this.events[y])||void 0===et?void 0:et.event)||void 0===it?void 0:it.event)||void 0===nt?void 0:nt.severity)!==(null===(at=null===(ot=null===(st=e[y])||void 0===st?void 0:st.event)||void 0===ot?void 0:ot.event)||void 0===at?void 0:at.severity)}getSeverityPriority(e){switch(e){case S.FATAL:return 0;case S.RECOVERABLE:return 1;case S.WARNING:return 2;default:return 100}}ngOnInit(){this.subscriptions.push(this.store.select(It.v3).subscribe(e=>{var n;(null===(n=Object.keys(e))||void 0===n?void 0:n.length)>0&&this.checkForChangeInEvents(e)&&(this.events=e)}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-overview-tab"]],decls:8,vars:4,consts:[[1,"outer-div-padding"],["fxLayout","row wrap","fxLayoutGap.lt-md","7px","fxLayoutGap","16px"],["class","page-components unselectable full-width-mobile","style","height: fit-content; min-width: 260px;",4,"ngFor","ngForOf"],[1,"page-components","unselectable","full-width-mobile",2,"height","fit-content","min-width","260px"],["class","page-components unselectable full-width-mobile","style","height: 100%; min-width: 260px; background-color: #E4ECF7 !important;","fxLayoutAlign","center center",4,"ngFor","ngForOf"],[3,"title","id"],["fxLayoutAlign","center center",1,"page-components","unselectable","full-width-mobile",2,"height","100%","min-width","260px","background-color","#E4ECF7 !important"],[2,"width","100% !important",3,"event"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,Xt,2,2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"app-disk-usage-graph"),t.qZA(),t.qZA(),t.TgZ(5,"div",1),t.YNc(6,Ht,2,1,"div",4),t.ALo(7,"keyvalue"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.graphs),t.xp6(4),t.Q6J("ngForOf",t.lcZ(7,2,n.events)))},directives:[u.xw,u.SQ,f.sg,Ut,Pt,u.Wh,jt],pipes:[f.Nd],styles:[""]}),i})();var $t=a(8393),te=a(519),ee=a(8746),ie=a(9366),ne=a(4415),se=a(4403),oe=a(3849),ae=a(8997),Tt=a(1414),yt=a(6317),B=a(8610),_t=a(3552),re=a(1110),le=a(2958),ce=a(9220),ue=a(4356),de=a(8411),pe=a(1384),me=a(3789),St=a(4064),Ct=a(9939),d=a(3679),F=a(1079),k=a(9083),C=a(8402),x=a(6215);const xt=(0,l.PH)("[LiftDropSequence] Update Lift Drop Sequence Distance",(0,l.Ky)()),Zt=(0,l.PH)("[LiftDropSequence] Update Lift Drop Sequence Repeat Count",(0,l.Ky)()),ve=(0,l.Lq)({loading:!1,distance:0,count:1},(0,l.on)(xt,(i,o)=>Object.assign(Object.assign({},i),{distance:o.distance})),(0,l.on)(Zt,(i,o)=>Object.assign(Object.assign({},i),{count:o.count}))),w=(0,l.Tz)({name:"liftDropSequence",reducer:ve}),ge=((0,l.P1)(w.selectLoading,i=>i),(0,l.P1)(w.selectCount,i=>i)),be=(0,l.P1)(w.selectDistance,i=>i);let D=(()=>{class i{constructor(e){this.store=e,this.newDistanceRequest=new x.X(null),this.newCountRequest=new x.X(null),this.newSteptRequest=new x.X(!1)}get distance(){return this.store.select(be)}get count(){return this.store.select(ge)}changeCount(e){this.newCountRequest.next(e),this.receiveCount(e)}changeDistance(e){this.newDistanceRequest.next(e),this.receiveDistance(e)}receiveCount(e){this.store.dispatch(Zt({count:e}))}receiveDistance(e){this.store.dispatch(xt({distance:e}))}sendLiftDropSequenceStep(){this.newSteptRequest.next(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(l.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),L=(()=>{class i{constructor(e){this.store=e,this.newRetryRequest=new x.X(!1)}sendRetryMissionStep(){this.newRetryRequest.next(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(l.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=a(249);const Te=function(i){return{"background-color":i}},ye=function(i){return[i]};let _e=(()=>{class i{constructor(e){this.store=e,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.store.select(F.Ue).subscribe(e=>{(0,k.diff)(this.currentState,e)&&(this.currentState=e)})),this.store.dispatch((0,C.x0)())}getIconClassFromStatus(e){let n="bi ";switch(null==e?void 0:e.toLowerCase()){case"idle":n+="bi-clock-history";break;case"busy":n+="bi-wrench";break;case"failed":n+="bi-exclamation-lg";break;default:n+="bi-question-lg"}return n}getIconBgColorFromStatus(e){let n="#E4ECF7";switch(null==e?void 0:e.toLowerCase()){case"idle":n="#6e6af4";break;case"busy":n="#ffba7d";break;case"failed":n="#ff7d7d"}return n}ngOnDestroy(){this.store.dispatch((0,C.m6)()),this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-current-state"]],decls:9,vars:8,consts:[["fxLayoutAlign","center center",1,"utilities-card",2,"min-width","280px","min-height","74px","overflow","auto"],["fxLayout","row","fxLayoutAlign","space-between center","fxFlexFill",""],["fxLayout","column",2,"height","100%"],[2,"font-weight","600","font-size","12px","color","#718096"],[2,"font-weight","400","font-size","20px","color","#16192C"],["fxLayoutAlign","center center",2,"height","46px","width","46px","border-radius","50%",3,"ngStyle","matTooltip"],[1,"state-icon","bi",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"span",3),t._uU(4,"Current State"),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"i",6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Oqu(n.currentState.state),t.xp6(1),t.Q6J("ngStyle",t.VKq(4,Te,n.getIconBgColorFromStatus(null==n.currentState||null==n.currentState.status?null:n.currentState.status.machine_status)))("matTooltip",null==n.currentState||null==n.currentState.status?null:n.currentState.status.machine_status.toUpperCase()),t.xp6(1),t.Q6J("ngClass",t.VKq(6,ye,n.getIconClassFromStatus(null==n.currentState||null==n.currentState.status?null:n.currentState.status.machine_status))))},directives:[u.Wh,u.xw,u.s9,f.PC,A.Zl,bt.gM,f.mk,A.oO],styles:[".state-icon[_ngcontent-%COMP%]{height:100%;line-height:46px;color:#fff;font-size:22px}"]}),i})();var Se=a(2458);function Ce(i,o){1&i&&t._UZ(0,"i",4)}function xe(i,o){1&i&&t._UZ(0,"i",5)}const Ze=function(i){return{color:i}};let ke=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-utilities-action"]],inputs:{actionTitle:"actionTitle",alert:"alert"},decls:5,vars:6,consts:[[1,"utilities-card",2,"min-width","298px"],[2,"font-size","14px","font-weight","bold","text-align","center","width","100%","display","block",3,"ngStyle"],["style","margin-right: 7px","class","bi bi-asterisk",4,"ngIf"],["style","margin-left: 7px","class","bi bi-chevron-right",4,"ngIf"],[1,"bi","bi-asterisk",2,"margin-right","7px"],[1,"bi","bi-chevron-right",2,"margin-left","7px"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t.YNc(2,Ce,1,0,"i",2),t._uU(3),t.YNc(4,xe,1,0,"i",3),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngStyle",t.VKq(4,Ze,n.alert?"#FF381D":"inherit")),t.xp6(1),t.Q6J("ngIf",n.alert),t.xp6(1),t.hij(" ",n.actionTitle," "),t.xp6(1),t.Q6J("ngIf",!n.alert))},directives:[f.PC,A.Zl,f.O5],styles:[""]}),i})();var O=a(1095),M=a(8295),q=a(9983),we=a(5396);function Ae(i,o){if(1&i&&(t.TgZ(0,"mat-form-field",9),t._UZ(1,"input",10),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("type",e.displayName)("placeholder",e.placeholder)("formControlName",e.fieldName)("min",n.getMinValue(e))("max",n.getMaxValue(e))}}function Me(i,o){if(1&i&&t._UZ(0,"mat-slide-toggle",11),2&i){const e=t.oxw().$implicit;t.Q6J("formControlName",null==e?null:e.fieldName)("disabled",!0)}}function Be(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-label",6),t._uU(2),t.qZA(),t.YNc(3,Ae,2,5,"mat-form-field",7),t.YNc(4,Me,1,2,"mat-slide-toggle",8),t.BQk()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.fieldName),t.xp6(1),t.Q6J("ngIf","number"===e.displayName),t.xp6(1),t.Q6J("ngIf","toggle"===(null==e?null:e.displayName))}}let Fe=(()=>{class i{constructor(){}ngOnInit(){this.settings.formType=null,this.settings.disabled=!1,this.formGroup=new d.cw({}),this.form.forEach(e=>{this.formGroup.addControl(e.fieldName,new d.NI(e.fieldState,e.validators))})}getMaxValue(e){return"Linear Velocity (m/s)"===(null==e?void 0:e.fieldName)?1:null}getMinValue(e){let n=null;switch(null==e?void 0:e.fieldName){case"Linear Velocity (m/s)":case"Distance (m)":case"Repeat count":n=0;break;default:n=null}return n}buttonPressed(){var e,n,s,r,c,p,m,v,g;this.formGroup.valid&&this.settings.formType&&("driveRelative"===this.settings.formType||"driveUser"===this.settings.formType?this.settings.buttonTrigger(parseFloat(null===(e=this.formGroup.controls["Translation X axis (m)"])||void 0===e?void 0:e.value),parseFloat(null===(n=this.formGroup.controls["Translation Y axis (m)"])||void 0===n?void 0:n.value),parseFloat(null===(s=this.formGroup.controls["Rotation angle (deg)"])||void 0===s?void 0:s.value),parseFloat(null===(c=null===(r=this.formGroup)||void 0===r?void 0:r.controls["Linear Velocity (m/s)"])||void 0===c?void 0:c.value),null===(m=null===(p=this.formGroup)||void 0===p?void 0:p.controls["Drive Backwards"])||void 0===m?void 0:m.value):"liftDropSequence"===this.settings.formType&&this.settings.buttonTrigger(parseFloat(null===(v=this.formGroup.controls["Distance (m)"])||void 0===v?void 0:v.value),parseFloat(null===(g=this.formGroup.controls["Repeat count"])||void 0===g?void 0:g.value)))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-utilities-form"]],inputs:{form:"form",settings:"settings"},decls:9,vars:6,consts:[[1,"text-dark-grey","utilities-card","utilities-form",2,"max-width","280px","min-height","650px","position","relative"],[1,"component-title"],[1,"component-description"],["fxLayout","column",2,"width","100%","margin-top","27px",3,"formGroup"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",2,"width","140px","height","45px","margin","auto","border-radius","8px","font-weight","700","margin-top","15px","position","absolute","align-self","center","bottom","30px",3,"disabled","click"],[2,"font-size","14px"],["style","font-size: 13px; font-weight: 500;","appearance","outline","color","accent",4,"ngIf"],[3,"formControlName","disabled",4,"ngIf"],["appearance","outline","color","accent",2,"font-size","13px","font-weight","500"],["matInput","",3,"type","placeholder","formControlName","min","max"],[3,"formControlName","disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t._uU(4),t.qZA(),t.TgZ(5,"form",3),t.YNc(6,Be,5,3,"ng-container",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.buttonPressed()}),t._uU(8),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(n.settings.title),t.xp6(2),t.hij(" ",n.settings.description," "),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(1),t.Q6J("ngForOf",n.form),t.xp6(1),t.Q6J("disabled",n.settings.disabled),t.xp6(1),t.hij(" ",n.settings.button," "))},directives:[d._Y,d.JL,u.xw,d.sg,f.sg,O.lW,M.hX,f.O5,M.KE,q.Nt,d.Fj,d.JJ,d.u,we.Rr],styles:[".utilities-form[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-infix{padding:6.5px 0}"]}),i})();var De=a(9021),Le=a(1769);function Oe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().$implicit.trigger()}),t._uU(2,"Send"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",e.disabled)}}function qe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"mat-form-field",13),t.TgZ(2,"input",14),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().$implicit.input=s}),t.qZA(),t.qZA(),t.TgZ(3,"div"),t.TgZ(4,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().$implicit.trigger()}),t._uU(5,"Send"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("placeholder",e.inputPlaceholder)("ngModel",e.input)("disabled",e.disabled),t.xp6(2),t.Q6J("disabled",e.disabled)}}const Ie=function(i){return{width:i}};function Re(i,o){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"mat-divider",4),t.TgZ(2,"div",5),t.TgZ(3,"div",6),t.TgZ(4,"span",7),t._uU(5),t.qZA(),t.TgZ(6,"span",8),t._uU(7),t.qZA(),t.qZA(),t.YNc(8,Oe,3,1,"div",9),t.qZA(),t.YNc(9,qe,6,4,"div",10),t.qZA()),2&i){const e=o.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngStyle",t.VKq(5,Ie,n.checkIfMobile()?"280px":"390px")),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",!e.inputPlaceholder),t.xp6(1),t.Q6J("ngIf",e.inputPlaceholder)}}let Ee=(()=>{class i{constructor(){}ngOnInit(){}checkIfMobile(){return De.b.checkIfMobile()}ngOnChanges(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-manual-actions"]],inputs:{actions:"actions"},features:[t.TTD],decls:6,vars:1,consts:[[1,"manual-actions",2,"max-width","440px","min-height","650px"],[1,"component-title"],[1,"component-description"],[4,"ngFor","ngForOf"],[2,"margin","20px 0"],["fxLayout","row","fxLayoutAlign","space-between center",1,"manual-action-row",2,"margin-bottom","20px",3,"ngStyle"],["fxLayout","column"],[2,"font-size","14px"],[1,"text-dark-grey",2,"font-size","14px"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end",4,"ngIf"],["mat-flat-button","","color","accent",3,"disabled","click"],["fxLayout","row","fxLayoutAlign","end"],["appearance","outline","color","accent",1,"grey-input","manual-action-input",2,"font-size","13px","font-weight","500","width","150px"],["matInput","",3,"placeholder","ngModel","disabled","ngModelChange"],["mat-flat-button","","color","accent",2,"margin-top","calc(.25em - 1px)","margin-left","12px",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2,"Send predefined steps"),t.qZA(),t.TgZ(3,"span",2),t._uU(4," Trigger frequently used steps. "),t.qZA(),t.YNc(5,Re,10,7,"div",3),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngForOf",n.actions))},directives:[f.sg,Le.d,u.xw,u.Wh,f.PC,A.Zl,f.O5,O.lW,M.KE,q.Nt,d.Fj,d.JJ,d.On],styles:[".manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-infix{padding:6.5px 0}.manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline.grey-input .mat-form-field-outline{background:#EDF2F7;border-radius:5px;box-shadow:none}.manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline.grey-input .mat-form-field-outline-end, .manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline.grey-input .mat-form-field-outline-start{border:none!important}.manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline{border-radius:5px;box-shadow:0 1px 2px #32324714,0 0 1px #32324733}.manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-end, .manual-actions[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-start{border-color:#32324714!important}@media screen and (max-width: 320px){.manual-action-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:218px!important}.manual-action-input[_ngcontent-%COMP%]{width:134px!important}}"]}),i})();function Ue(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-utilities-action",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().dropLiftButtonPressed()}),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("actionTitle","Drop lift"))}function Ne(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-utilities-action",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().raiseLiftButtonPressed()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.ekj("disabled",e.isBrainBusy()),t.xp6(1),t.Q6J("actionTitle","Raise lift")}}function Qe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-utilities-action",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().stopChargingButtonPressed()}),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("actionTitle","Stop charging"))}function Je(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-utilities-action",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().startChargingButtonPressed()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.ekj("disabled",e.isBrainBusy()),t.xp6(1),t.Q6J("actionTitle","Start charging")}}let Pe=(()=>{class i{constructor(e,n,s,r,c){this.store=e,this.changeDetection=n,this.liftDropSequenceMiddleware=s,this.RetryCommandMS=r,this.snackbar=c,this.liftValue=!1,this.dropValue=!0,this.chargeOffValue=!0,this.chargeValue=!1,this.isMissionFailed=!1,this.subscriptions=[],this.driveForm=[{displayName:"number",fieldName:"Translation X axis (m)",placeholder:"Enter x coordinate",fieldState:"1",validators:null},{displayName:"number",fieldName:"Translation Y axis (m)",placeholder:"Enter y coordinate",fieldState:"0",validators:null},{displayName:"number",fieldName:"Rotation angle (deg)",placeholder:"Enter theta value",fieldState:"0",validators:null}],this.userForm=[{displayName:"number",fieldName:"Translation X axis (m)",placeholder:"Enter x coordinate",fieldState:"1",validators:null},{displayName:"number",fieldName:"Translation Y axis (m)",placeholder:"Enter y coordinate",fieldState:"0",validators:null},{displayName:"number",fieldName:"Rotation angle (deg)",placeholder:"Enter theta value",fieldState:"0",validators:null}],this.utilitiesForms=[{title:"Drive relative",description:"Input parameters to drive to a position relative to the device.",button:"Drive relative",disabled:this.isBrainBusy(),formType:"driveRelative",buttonTrigger:(p,m,v,g,h)=>{var b,T,_;"busy"!==(null===(_=null===(T=null===(b=this.currentState)||void 0===b?void 0:b.status)||void 0===T?void 0:T.machine_status)||void 0===_?void 0:_.toLowerCase())&&(this.store.dispatch((0,ie.A)({driveRelativePositionRequest:{x:p,y:m,theta:v}})),setTimeout(()=>{this.store.dispatch((0,ne.p)({driveRelativeSpeedRequest:g})),setTimeout(()=>{this.store.dispatch((0,se.N)({driveToRelativePositionRequest:!0})),this.displayMissionSentSuccessfullySnackbar()},200)},200))}},{title:"User defined location",description:"Input parameters to drive to defined map coordinates.",button:"Go to location",disabled:this.isBrainBusy(),formType:"driveUser",buttonTrigger:(p,m,v,g)=>{var h,b,T;"busy"!==(null===(T=null===(b=null===(h=this.currentState)||void 0===h?void 0:h.status)||void 0===b?void 0:b.machine_status)||void 0===T?void 0:T.toLowerCase())&&(this.store.dispatch((0,oe.A)({gotoPositionRequest:{x:p,y:m,theta:v}})),setTimeout(()=>{this.store.dispatch((0,ae.E)({gotoHardcodedPoseRequest:!0})),this.displayMissionSentSuccessfullySnackbar()},200))}},{title:"Dolly lift to drop sequence",description:"Input parameters to initialize lift drop sequence",button:"Initialize",disabled:this.isBrainBusy(),formType:"liftDropSequence",buttonTrigger:(p,m)=>{var v,g,h;"busy"!==(null===(h=null===(g=null===(v=this.currentState)||void 0===v?void 0:v.status)||void 0===g?void 0:g.machine_status)||void 0===h?void 0:h.toLowerCase())&&null!=p&&null!=m&&(this.liftDropSequenceMiddleware.changeCount(m),setTimeout(()=>{this.liftDropSequenceMiddleware.changeDistance(p),setTimeout(()=>{this.liftDropSequenceMiddleware.sendLiftDropSequenceStep(),this.displayMissionSentSuccessfullySnackbar()},200)},200))}}],this.dollyLiftDropSequenceForm=[{displayName:"number",fieldName:"Distance (m)",placeholder:"Enter distance value",fieldState:"2.4",validators:[d.kI.required,d.kI.min(0)]},{displayName:"number",fieldName:"Repeat count",placeholder:"Enter count value",fieldState:"1",validators:[d.kI.required,d.kI.min(0)]}],this.manualActions=[]}isBrainBusy(){var e,n,s;return"busy"==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())}displayMissionSentSuccessfullySnackbar(){this.snackbar.openSnackBar("Mission Sent Successfully",null,{verticalPosition:"top",horizontalPosition:"right"})}retryMissionButtonPressed(){this.RetryCommandMS.sendRetryMissionStep(),this.displayMissionSentSuccessfullySnackbar()}raiseLiftButtonPressed(){this.store.dispatch((0,Tt.mX)()),this.store.dispatch((0,yt.ej)()),this.displayMissionSentSuccessfullySnackbar()}dropLiftButtonPressed(){this.store.dispatch((0,yt.Sx)()),this.store.dispatch((0,Tt.n1)()),this.displayMissionSentSuccessfullySnackbar()}startChargingButtonPressed(){this.store.dispatch((0,_t.Y0)()),this.store.dispatch((0,B.R8)()),this.displayMissionSentSuccessfullySnackbar()}stopChargingButtonPressed(){this.store.dispatch((0,B.Gh)()),this.store.dispatch((0,_t.D2)()),this.displayMissionSentSuccessfullySnackbar()}abortMissionButtonPressed(){this.store.dispatch((0,me.qW)())}acknowledgeErrorButtonPressed(){this.store.dispatch((0,te.$)())}ngOnInit(){this.manualActions=[{name:"Dock to charging station",description:"",disabled:this.isBrainBusy(),trigger:()=>{var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&(this.store.dispatch((0,$t.m)()),this.displayMissionSentSuccessfullySnackbar())}},{name:"Start charging manually",description:"",disabled:this.isBrainBusy(),trigger:()=>{var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&(this.store.dispatch((0,B.R8)()),this.displayMissionSentSuccessfullySnackbar())}},{name:"Undock from charging station",description:"",disabled:this.isBrainBusy(),trigger:()=>{var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&(this.store.dispatch((0,ee.k)()),this.displayMissionSentSuccessfullySnackbar())}},{name:"Dock to dolly",description:"",disabled:this.isBrainBusy(),trigger:()=>{var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&(this.store.dispatch((0,de.$)()),this.displayMissionSentSuccessfullySnackbar())}},{name:"Dock to turntable",description:"",disabled:this.isBrainBusy(),trigger:()=>{var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&(this.store.dispatch((0,pe.g)()),this.displayMissionSentSuccessfullySnackbar())}}],this.store.dispatch((0,C.x0)()),this.store.dispatch((0,St.nr)()),this.store.dispatch((0,Ct.HU)()),this.subscriptions.push(this.store.select(re.mi).subscribe(e=>{this.chargeOffValue===e||(this.chargeOffValue=e)}),this.store.select(le.Ww).subscribe(e=>{this.chargeValue===e||(this.chargeValue=e)}),this.store.select(ce.QY).subscribe(e=>{this.dropValue===e||(this.dropValue=e)}),this.store.select(ue.Nl).subscribe(e=>{this.liftValue===e||(this.liftValue=e)}),this.store.select(F.Ue).subscribe(e=>{var n,s;const r="failed"===(null===(s=null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase());null!=r&&r!==this.isMissionFailed&&(this.isMissionFailed=r),(0,k.diff)(this.currentState,e)&&(this.currentState=e,this.manualActions.forEach(c=>c.disabled=this.isBrainBusy()),this.manualActions=[...this.manualActions],this.utilitiesForms.forEach(c=>c.disabled=this.isBrainBusy()),this.utilitiesForms=[...this.utilitiesForms])}))}ngOnDestroy(){this.store.dispatch((0,St.d_)()),this.store.dispatch((0,Ct.UO)()),this.store.dispatch((0,C.m6)()),this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh),t.Y36(t.sBO),t.Y36(D),t.Y36(L),t.Y36(dt.o))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-utilities-tab"]],decls:28,vars:18,consts:[[1,"outer-div-padding","utilities-tab",2,"margin-bottom","40px"],["fxLayout","column","fxLayoutGap","26px"],["fxLayout","row wrap","fxFlex","30","fxLayoutGap.gt-sm","30px"],[1,"full-width-mobile"],[1,"page-components","unselectable"],["fxLayout","column",1,"full-width-mobile"],["class","page-components action-button",4,"ngIf"],["class","page-components action-button",3,"disabled",4,"ngIf"],["matRipple","",1,"page-components","action-button"],[3,"alert","actionTitle","click"],[3,"actionTitle","click"],["fxLayout","row wrap","fxFlex","70","fxLayoutGap.gt-sm","30px"],[1,"page-components","unselectable","full-width-mobile"],[3,"form","settings"],[3,"actions"],[1,"page-components","action-button"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"app-current-state"),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,Ue,2,1,"div",6),t.YNc(8,Ne,2,3,"div",7),t.YNc(9,Qe,2,1,"div",6),t.YNc(10,Je,2,3,"div",7),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"div",8),t.TgZ(13,"app-utilities-action",9),t.NdJ("click",function(){return n.acknowledgeErrorButtonPressed()}),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"app-utilities-action",9),t.NdJ("click",function(){return n.abortMissionButtonPressed()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"div",8),t.TgZ(18,"app-utilities-action",10),t.NdJ("click",function(){return n.retryMissionButtonPressed()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",11),t.TgZ(20,"div",12),t._UZ(21,"app-utilities-form",13),t.qZA(),t.TgZ(22,"div",12),t._UZ(23,"app-utilities-form",13),t.qZA(),t.TgZ(24,"div",12),t._UZ(25,"app-utilities-form",13),t.qZA(),t.TgZ(26,"div",12),t._UZ(27,"app-manual-actions",14),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.liftValue),t.xp6(1),t.Q6J("ngIf",n.dropValue),t.xp6(1),t.Q6J("ngIf",n.chargeValue),t.xp6(1),t.Q6J("ngIf",n.chargeOffValue),t.xp6(3),t.Q6J("alert",!0)("actionTitle","Acknowledge Error"),t.xp6(2),t.Q6J("alert",!0)("actionTitle","Abort Cockpit Mission"),t.xp6(2),t.ekj("disabled",!n.isMissionFailed),t.xp6(1),t.Q6J("actionTitle","Retry mission"),t.xp6(3),t.Q6J("form",n.driveForm)("settings",n.utilitiesForms[0]),t.xp6(2),t.Q6J("form",n.userForm)("settings",n.utilitiesForms[1]),t.xp6(2),t.Q6J("form",n.dollyLiftDropSequenceForm)("settings",n.utilitiesForms[2]),t.xp6(2),t.Q6J("actions",n.manualActions))},directives:[u.xw,u.SQ,u.yH,_e,f.O5,Se.wG,ke,Fe,Ee],styles:[".utilities-tab[_ngcontent-%COMP%]  .mat-focused .mat-form-field-label{color:#000!important}.utilities-tab[_ngcontent-%COMP%]  .mat-form-field-underline{background-color:gray!important}.utilities-tab[_ngcontent-%COMP%]  .mat-form-field-ripple{background-color:#000!important}.utilities-tab[_ngcontent-%COMP%]  .mat-form-field-label{color:gray!important}.min-height[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:15px}"]}),i})();const Ge=[{Title:"Last Brake Test",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Success"},{Title:"Automatic Brake Test",Status:"Disabled"},{Title:"Test2",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Warn",Message:"Whoops I Slipped"},{Title:"Test3",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Error",Message:"Boy you gonna need a new car"},{Title:"Test4",StartDate:new Date(Date.now()),Status:"Running"}];var Ve=a(7707),kt=a(960),Ye=a(3511),We=a(1596),ze=a(7548);const I=(0,l.PH)("[StaticBrakeTest] Update Static Brake Test Time Interval",(0,l.Ky)()),R=(0,l.PH)("[StaticBrakeTest] Update Static Brake Test Error Time Threshold",(0,l.Ky)()),He=(0,l.Lq)({loading:!1,errorTimeThreshold:null,timeInterval:null},(0,l.on)(I,(i,o)=>Object.assign(Object.assign({},i),{timeInterval:o.timeInterval})),(0,l.on)(R,(i,o)=>Object.assign(Object.assign({},i),{errorTimeThreshold:o.errorTimeThreshold}))),E=(0,l.Tz)({name:"staticBrakeTest",reducer:He}),Ke=(0,l.P1)(E.selectTimeInterval,i=>i),$e=(0,l.P1)(E.selectErrorTimeThreshold,i=>i);var wt=a(409),At=a(8612);let U=(()=>{class i{constructor(e){this.store=e,this.configTimeInterval=null,this.configErrorTimeThreshold=null,this.newErrorThresholdRequest=new x.X(null),this.newTimeIntervalRequest=new x.X(null),this.store.select(At.tg).pipe((0,wt.o)(n=>null==this.configTimeInterval)).subscribe(n=>{null!=n&&this.receiveStaticBrakeTestTimeInterval(n),this.configTimeInterval=n}),this.store.select(At.Vc).pipe((0,wt.o)(n=>null==this.configErrorTimeThreshold)).subscribe(n=>{null!=n&&this.receiveStaticBrakeTestErrorTimeThreshold(n),this.configErrorTimeThreshold=n})}get timeInterval(){return this.store.select(Ke)}get errorTimeThreshold(){return this.store.select($e)}changeStaticBrakeTestTimeInterval(e){this.newTimeIntervalRequest.next(e),this.store.dispatch(I({timeInterval:e}))}changeStaticBrakeTestErrorTimeThreshold(e){this.newErrorThresholdRequest.next(e),this.store.dispatch(R({errorTimeThreshold:e}))}receiveStaticBrakeTestTimeInterval(e){this.store.dispatch(I({timeInterval:e}))}receiveStaticBrakeTestErrorTimeThreshold(e){this.store.dispatch(R({errorTimeThreshold:e}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(l.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=a(8328),ti=a(5991);const ei=["brakeTestTable"];function ii(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",5),t._UZ(1,"app-switch-tile",6),t.TgZ(2,"form",7),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",8),t.qZA(),t.TgZ(5,"mat-form-field"),t._UZ(6,"input",9),t.qZA(),t.qZA(),t.TgZ(7,"div",10),t.TgZ(8,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().startStaticBrakeTest()}),t._uU(9," Start test"),t.qZA(),t.TgZ(10,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onStaticBrakeTestTimeValuesSubmit()}),t._uU(11," Submit"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("description","Automatically performed on a "+e.staticBrakeTestFormGroup.controls.timeInterval.value+"hr cycle.")("slideAction",e.staticBrakeTestAction)("initialValue",e.initialStaticBrakeTestValue)("slideTextDisabled","Disabled"),t.xp6(1),t.Q6J("formGroup",e.staticBrakeTestFormGroup),t.xp6(6),t.Q6J("disabled",e.isBrainBusy())}}let ni=(()=>{class i{constructor(e,n){this.store=e,this.staticBrakeTestMiddleware=n,this.attemptedBrakeTests=Ge,this.subscriptions=[],this.staticBrakeTestFormGroup=new d.cw({timeInterval:new d.NI("",[d.kI.required]),errorTimeThreshold:new d.NI("",[d.kI.required])}),this.columns=[{id:"time",name:"Time",badge:{badgeCell:!0,badgeColorRule:s=>"#425466",badgeValueRule:s=>s,badgeBackgroundColorRule:s=>"transparent"}},{id:"status",name:"Status",badge:{badgeCell:!0,badgeColorRule:s=>"#425466",badgeValueRule:s=>!0===s?"SUCCESS":"FAILURE",badgeBackgroundColorRule:s=>!0===s?"#DEFFEE":"#FFDEDE"}}],this.tableData=[],this.action={input:null,inputPlaceholder:"Input drive speed",trigger(){}},this.staticBrakeTestAction={input:null,inputPlaceholder:"Enable/Disable static brake test",trigger:s=>{var r,c,p;"busy"!==(null===(p=null===(c=null===(r=this.currentState)||void 0===r?void 0:r.status)||void 0===c?void 0:c.machine_status)||void 0===p?void 0:p.toLowerCase())&&this.store.dispatch((0,Ve.vs)({disableAutomaticTestRequest:s}))}},this.initialStaticBrakeTestValue=void 0}onStaticBrakeTestTimeValuesSubmit(){var e,n,s,r;this.staticBrakeTestMiddleware.changeStaticBrakeTestErrorTimeThreshold(null===(n=null===(e=this.staticBrakeTestFormGroup)||void 0===e?void 0:e.controls.errorTimeThreshold)||void 0===n?void 0:n.value),this.staticBrakeTestMiddleware.changeStaticBrakeTestTimeInterval(null===(r=null===(s=this.staticBrakeTestFormGroup)||void 0===s?void 0:s.controls.timeInterval)||void 0===r?void 0:r.value)}startStaticBrakeTest(){var e,n,s;"busy"!==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())&&this.store.dispatch((0,ze.F)())}ngOnInit(){this.subscriptions.push(this.store.select(Ye.cR).subscribe(e=>{var n;this.tableData=e.filter(s=>s.time_of_test).map((s,r)=>({status:!0,time:s.time_of_test})),null===(n=this.brakeTestTable)||void 0===n||n.setTableData(this.tableData)}),this.store.select(We.jV).subscribe(e=>{this.initialStaticBrakeTestValue=void 0!==e?!e:void 0}),this.staticBrakeTestMiddleware.errorTimeThreshold.subscribe(e=>{this.staticBrakeTestFormGroup.controls.errorTimeThreshold.setValue(e)}),this.staticBrakeTestMiddleware.timeInterval.subscribe(e=>{this.staticBrakeTestFormGroup.controls.timeInterval.setValue(e)}),this.store.select(F.Ue).subscribe(e=>{(0,k.diff)(this.currentState,e)&&(this.currentState=e)})),this.store.dispatch((0,C.x0)()),this.store.dispatch((0,kt.GU)())}ngOnDestroy(){this.store.dispatch((0,C.m6)()),this.store.dispatch((0,kt.pN)()),this.subscriptions.forEach(e=>e.unsubscribe())}isBrainBusy(){var e,n,s;return"busy"==(null===(s=null===(n=null===(e=this.currentState)||void 0===e?void 0:e.status)||void 0===n?void 0:n.machine_status)||void 0===s?void 0:s.toLowerCase())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh),t.Y36(U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-brake-test-tab"]],viewQuery:function(e,n){if(1&e&&t.Gf(ei,5),2&e){let s;t.iGM(s=t.CRH())&&(n.brakeTestTable=s.first)}},decls:5,vars:4,consts:[["fxLayout","column","fxLayoutGap","16px",1,"outer-div-padding",2,"height","100%","color","black","overflow","auto"],["fxLayout","row wrap","fxLayoutGap.gt-sm","30px",2,"width","100%"],["class","page-components card-max-360 full-width-mobile","fxFlex.sm","100","fxLayoutGap","16px",4,"ngIf"],["title","Hello",3,"title","columns","ELEMENT_DATA"],["brakeTestTable",""],["fxFlex.sm","100","fxLayoutGap","16px",1,"page-components","card-max-360","full-width-mobile"],["title","Static brake test","slideText","Enabled",3,"description","slideAction","initialValue","slideTextDisabled"],["fxLayout","column",3,"formGroup"],["matInput","","type","text","placeholder","Time Interval","formControlName","timeInterval"],["matInput","","type","text","placeholder","Error Time Threshold","formControlName","errorTimeThreshold"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-flat-button","","color","accent",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,ii,12,6,"div",2),t.qZA(),t._UZ(3,"app-data-table",3,4),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",void 0!==n.initialStaticBrakeTestValue),t.xp6(1),t.Q6J("title","Brake Test History")("columns",n.columns)("ELEMENT_DATA",n.tableData))},directives:[u.xw,u.SQ,f.O5,N.Q,u.yH,ti.s,d._Y,d.JL,d.sg,M.KE,q.Nt,d.Fj,d.JJ,d.u,u.Wh,O.lW],styles:[""]}),i})();var Mt=a(7826),si=a(5825);const oi=["missionStepsTable"];let ai=(()=>{class i{constructor(e){this.store=e,this.subscriptions=[],this.columns=[{id:"payload",name:"Payload",badge:{badgeCell:!0,badgeColorRule:n=>"#425466",badgeValueRule:n=>this.getObjectKeyValuePairs(n),badgeBackgroundColorRule:n=>"transparent"}},{id:"stepName",name:"Step Name",badge:{badgeCell:!0,badgeColorRule:n=>"#425466",badgeValueRule:n=>n,badgeBackgroundColorRule:n=>"transparent"}},{id:"userData",name:"User Data",badge:{badgeCell:!0,badgeColorRule:n=>"#425466",badgeValueRule:n=>this.getObjectKeyValuePairs(n),badgeBackgroundColorRule:n=>"transparent"}},{id:"id",name:"Id"}],this.tableData=[],this.getDisplayType=n=>"number"==typeof n?"number":"text"}ngOnInit(){this.subscriptions.push(this.store.select(si.o2).subscribe(e=>{var n;let s=e.map((r,c)=>({id:r.id,payload:r.payload,stepName:r.stepName,userData:r.userData}));(0,k.diff)(this.tableData,s)&&(this.tableData=s,null===(n=this.missionStepsTable)||void 0===n||n.setTableData(this.tableData))})),this.store.dispatch((0,Mt.Kq)())}getObjectKeyValuePairs(e){let n=[],s=null;return e&&(s=JSON.parse(e)),s&&(n=this.getChildrenRecursive(s)),n}getChildrenRecursive(e,n){var s;let c,r=[],p=1;n?r=n.split("."):c="1";let m=this.getObjectKeys(e);if((null==m?void 0:m.length)<=0)return[];let g,v=[];for(let h of m){c=null==r?void 0:r.concat(p.toString()).join(".");let b=(null===(s=this.getObjectKeys(e[h]))||void 0===s?void 0:s.length)>0&&"string"!=typeof e[h],T=b&&Array.isArray(e[h]);g={id:c,parentId:n,name:h,children:b?this.getChildrenRecursive(e[h],c):null,value:b?null:e[h],isArray:T,displayType:b?null:this.getDisplayType(e[h])},v.push(g),p++}return v}getObjectKeys(e){if(e){let n=[];for(const s in e)n.push(s);return n}}getColumns(){return this.columns}ngOnDestroy(){this.store.dispatch((0,Mt.LN)()),this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mission-steps-table"]],viewQuery:function(e,n){if(1&e&&t.Gf(oi,5),2&e){let s;t.iGM(s=t.CRH())&&(n.missionStepsTable=s.first)}},decls:2,vars:4,consts:[[3,"title","columns","ELEMENT_DATA","areColumnsExpandable"],["missionStepsTable",""]],template:function(e,n){1&e&&t._UZ(0,"app-data-table",0,1),2&e&&t.Q6J("title","Mission Steps")("columns",n.getColumns())("ELEMENT_DATA",n.tableData)("areColumnsExpandable",!1)},directives:[N.Q],styles:[""]}),i})();var Bt=a(4992),ri=a(369);const li=["missionQueueTable"];let ci=(()=>{class i{constructor(e){this.store=e,this.subscriptions=[],this.columns=[{id:"order",name:"Order",badge:{badgeCell:!0,badgeColorRule:n=>"#425466",badgeValueRule:n=>n,badgeBackgroundColorRule:n=>"transparent"}},{id:"stepCount",name:"Step Count",badge:{badgeCell:!0,badgeColorRule:n=>"#425466",badgeValueRule:n=>n,badgeBackgroundColorRule:n=>"transparent"}},{id:"id",name:"Id"}],this.tableData=[]}ngOnInit(){this.subscriptions.push(this.store.select(ri.eU).subscribe(e=>{var n;let s=e.map((r,c)=>({id:r.id,order:r.order,stepCount:r.stepCount}));(0,k.diff)(this.tableData,s)&&(this.tableData=s,null===(n=this.missionQueueTable)||void 0===n||n.setTableData(this.tableData))})),this.store.dispatch((0,Bt.WU)())}ngOnDestroy(){this.store.dispatch((0,Bt.i4)()),this.subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mission-queue-table"]],viewQuery:function(e,n){if(1&e&&t.Gf(li,5),2&e){let s;t.iGM(s=t.CRH())&&(n.missionQueueTable=s.first)}},decls:2,vars:3,consts:[[3,"title","columns","ELEMENT_DATA"],["missionQueueTable",""]],template:function(e,n){1&e&&t._UZ(0,"app-data-table",0,1),2&e&&t.Q6J("title","Mission Queue")("columns",n.columns)("ELEMENT_DATA",n.tableData)},directives:[N.Q],styles:[""]}),i})(),ui=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-queue-tab"]],decls:3,vars:0,consts:[["fxLayout","column","fxLayoutGap","16px",1,"outer-div-padding",2,"height","100%","color","black","overflow","auto"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-mission-steps-table"),t._UZ(2,"app-mission-queue-table"),t.qZA())},directives:[u.xw,u.SQ,ai,ci],styles:[""]}),i})();var di=a(4244);function pi(i,o){if(1&i&&(t.ynx(0,9),t._UZ(1,"app-notification-bar",10),t.BQk()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("notificationBar",e)}}function mi(i,o){if(1&i&&(t.ynx(0),t._UZ(1,"app-notification-bar",10),t.BQk()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("notificationBar",e)}}function hi(i,o){if(1&i&&(t.ynx(0),t._UZ(1,"app-notification-bar",10),t.BQk()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("notificationBar",e)}}function fi(i,o){if(1&i&&(t.ynx(0),t._UZ(1,"app-notification-bar",10),t.BQk()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("notificationBar",e)}}const vi=[{path:"",component:(()=>{class i{constructor(e,n,s,r){this.alert=e,this.snackbar=n,this.store=s,this.notificationBarMiddleware=r,this.notificationBars=[]}ngOnInit(){this.notificationBarMiddleware.notificationBars.subscribe(e=>{this.notificationBars=e||[]}),this.store.dispatch((0,ct.Oe)())}selectedTabChanged(e){2===e.index?this.notificationBarMiddleware.addNotificationBar({id:"brakeTestWarning",closable:!0,content:"Only preform saftey tests in safe conditions, ensure personel are clear.",severity:Ot.l.WARNING}):this.notificationBarMiddleware.removeNotificationBar("brakeTestWarning")}ngOnDestroy(){this.store.dispatch((0,ct.gj)())}openDialog(){this.alert.openAlert("title","subtitle",["description"])}openSnackbar(){this.snackbar.openSnackBar("test snackbar","ok")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ut.Q),t.Y36(dt.o),t.Y36(l.yh),t.Y36(qt.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-system-status"]],decls:18,vars:4,consts:[[1,"page-style","system-status"],["color","primary","mat-align-tabs","start",3,"selectedTabChange"],["label","Overview"],["fxLayout","column",2,"width","100%"],["fxLayout","column",4,"ngFor","ngForOf"],["label","Controls"],[4,"ngFor","ngForOf"],["label","Brake Test"],["label","Mission"],["fxLayout","column"],[2,"width","100%",3,"notificationBar"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedTabChange",function(r){return n.selectedTabChanged(r)}),t.TgZ(2,"mat-tab",2),t.TgZ(3,"div",3),t.YNc(4,pi,2,1,"ng-container",4),t.qZA(),t._UZ(5,"app-overview-tab"),t.qZA(),t.TgZ(6,"mat-tab",5),t.TgZ(7,"div",3),t.YNc(8,mi,2,1,"ng-container",6),t.qZA(),t._UZ(9,"app-utilities-tab"),t.qZA(),t.TgZ(10,"mat-tab",7),t.TgZ(11,"div",3),t.YNc(12,hi,2,1,"ng-container",6),t.qZA(),t._UZ(13,"app-brake-test-tab"),t.qZA(),t.TgZ(14,"mat-tab",8),t.TgZ(15,"div",3),t.YNc(16,fi,2,1,"ng-container",6),t.qZA(),t._UZ(17,"app-queue-tab"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngForOf",n.notificationBars),t.xp6(4),t.Q6J("ngForOf",n.notificationBars),t.xp6(4),t.Q6J("ngForOf",n.notificationBars),t.xp6(4),t.Q6J("ngForOf",n.notificationBars))},directives:[pt.SP,pt.uX,u.xw,f.sg,Kt,Pe,ni,ui,di.F],styles:[".page-style[_ngcontent-%COMP%]{height:calc(100vh - 96px)}.system-status[_ngcontent-%COMP%]  .mat-tab-body-wrapper{height:calc(100vh - 144px)}@media screen and (max-width: 479px){.system-status[_ngcontent-%COMP%]  .mat-tab-label{width:33.33%}}"]}),i})(),data:{animation:"LandingPageAnimation"}},{path:"**",redirectTo:""}];let gi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[lt.Bz.forChild(vi)],lt.Bz]}),i})();var bi=a(2511);const Ti={type:"config",data:{request:"set",config:{"ideal_brain.static_brake_test.brake_test_checker":{brake_test_checker:{brake_test_time_interval_h:null}}}}},yi={type:"config",data:{request:"set",config:{"ideal_brain.static_brake_test.brake_test_checker":{brake_test_checker:{max_brake_test_time_limit_h:null}}}}};var Z=a(3815),Q=a(7195);let Ft=(()=>{class i{constructor(e,n){this.websocketService=e,this.staticBrakeTestMiddleware=n,this.staticBrakeTestMiddleware.newTimeIntervalRequest.subscribe(s=>{null!=s&&null!=s&&this.RequestChangeTimeInterval(s)}),this.staticBrakeTestMiddleware.newErrorThresholdRequest.subscribe(s=>{null!=s&&null!=s&&this.RequestChangeErrorTimeThreshold(s)})}RequestChangeTimeInterval(e){let n=(0,Z.cloneDeep)(Ti);n.data.config["ideal_brain.static_brake_test.brake_test_checker"].brake_test_checker.brake_test_time_interval_h=e,this.websocketService.sendMessage(n)}RequestChangeErrorTimeThreshold(e){let n=(0,Z.cloneDeep)(yi);n.data.config["ideal_brain.static_brake_test.brake_test_checker"].brake_test_checker.max_brake_test_time_limit_h=e,this.websocketService.sendMessage(n)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Q.i),t.LFG(U))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_i=(()=>{class i{constructor(e){this.api=e}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Ft))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Ft,U],imports:[[f.ez,l.Aw.forFeature(E)]]}),i})();const Si={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{dolly_lift_drop_sequence_count:null}}}}},Ci={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{straight_backward_distance:null}}}}},xi={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{dolly_lift_drop:!0}}}}};let Dt=(()=>{class i{constructor(e,n){this.middleware=e,this.websocket=n,this.middleware.newCountRequest.subscribe(s=>{if(null!=s){let r=(0,Z.cloneDeep)(Si);r.data.config.ats_emulator.ats_emulator.dolly_lift_drop_sequence_count=s,this.websocket.sendMessage(r)}}),this.middleware.newDistanceRequest.subscribe(s=>{if(null!=s){let r=(0,Z.cloneDeep)(Ci);r.data.config.ats_emulator.ats_emulator.straight_backward_distance=s,this.websocket.sendMessage(r)}}),this.middleware.newSteptRequest.subscribe(s=>{if(s){let r=(0,Z.cloneDeep)(xi);this.websocket.sendMessage(r)}})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D),t.LFG(Q.i))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zi=(()=>{class i{constructor(e){this.api=e}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Dt))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Dt,D],imports:[[f.ez,l.Aw.forFeature(w)]]}),i})();const Ai=(0,l.Lq)({loading:!1,distance:0,count:1}),Mi=(0,l.Tz)({name:"liftDropSequence",reducer:Ai}),Bi={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{retry_mission:!0}}}}};let Lt=(()=>{class i{constructor(e,n){this.middleware=e,this.websocket=n,this.middleware.newRetryRequest.subscribe(s=>{if(s){let r=(0,Z.cloneDeep)(Bi);this.websocket.sendMessage(r)}})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(L),t.LFG(Q.i))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Fi=(()=>{class i{constructor(e){this.api=e}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Lt))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Lt,L],imports:[[f.ez,l.Aw.forFeature(Mi)]]}),i})();var Di=a(6627);let Li=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[bi.L,gi,gt.Ns.forChild(),_i,Zi,Fi,Di.Ps]]}),i})()}}]);