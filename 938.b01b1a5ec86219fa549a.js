"use strict";(self.webpackChunkideal_app=self.webpackChunkideal_app||[]).push([[938],{4938:(S,g,i)=>{i.r(g),i.d(g,{UsersModule:()=>L});var c=i(5987),b=i(9021),p=i(9860),m=i(5285),v=i(4286),f=i(5351),h=i(5063),C=i(3815),a=i(7716),R=i(3065),M=i(5592),B=i(1530),U=i(2558),N=i(5618),D=i(8583),y=i(8328),T=i(1356);const x=["table"];function P(o,l){if(1&o&&(a.ynx(0),a._UZ(1,"app-notification-bar",6),a.BQk()),2&o){const n=l.$implicit;a.xp6(1),a.Q6J("notificationBar",n)}}const A=[{path:"",component:(()=>{class o{constructor(n,r,e,s){this.store=n,this.editUserDialogService=r,this.jwtService=e,this.notificationBarMiddleware=s,this.subscriptions=[],this.columns=[{id:"username",name:"Username",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"firstName",name:"First Name",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"lastName",name:"Last Name",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"email",name:"Email",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"address",name:"Address",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"phoneNumber",name:"Phone Number",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"dateCreated",name:"Date Created",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"dateModified",name:"Date Modified",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"role",name:"Role",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"edit",name:"",button:!0},{id:"delete",name:"",button:!0}],this.buttonTriggers={edit:{buttonName:"Edit",trigger:t=>{let u=this.tableData.find(d=>d.id===t);this.editUserDialogService.openDialog(u,!0,d=>{this.store.dispatch((0,v.o)({updateUserByIdRequest:{id:d.id,email:d.email,firstName:d.firstName,lastName:d.lastName,phoneNumber:d.phoneNumber,address:d.address,role:d.role}}))})}},delete:{buttonName:"Delete",trigger:t=>{this.store.dispatch((0,p.a)({deleteUserRequest:t}))}}},this.tableData=[],this.notificationBars=[]}ngOnInit(){this.subscriptions.push(this.notificationBarMiddleware.notificationBars.subscribe(n=>{this.notificationBars=n}),this.store.select(h.Rv).subscribe(n=>{if(n){let r=(0,C.cloneDeep)(this.tableData);(n=n.filter(e=>parseInt(e.id)!==this.jwtService.getId())).forEach(e=>{let s=r.findIndex(t=>t.id===e.id);-1===s?r.push({id:e.id,username:null==e?void 0:e.username,firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,email:null==e?void 0:e.email,address:null==e?void 0:e.address,phoneNumber:null==e?void 0:e.phoneNumber,dateCreated:null==e?void 0:e.dateCreated.toLocaleDateString(),dateModified:null==e?void 0:e.dateModified.toLocaleDateString(),role:null==e?void 0:e.role,edit:!0}):r[s]=Object.assign(Object.assign({},e),{dateCreated:null==e?void 0:e.dateCreated.toLocaleDateString(),dateModified:null==e?void 0:e.dateModified.toLocaleDateString()})}),r.forEach((e,s)=>{-1===n.findIndex(u=>u.id===e.id)&&r.splice(s,1)}),this.table&&(this.table.setTableData(r),this.tableData=r)}}),this.store.select(f.PW).subscribe(n=>{this.store.dispatch((0,m.I)())})),this.store.dispatch((0,m.I)())}checkIfMobile(){return b.b.checkIfMobile()}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(R.yh),a.Y36(M.i),a.Y36(B.T),a.Y36(U.Y))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-users-page"]],viewQuery:function(n,r){if(1&n&&a.Gf(x,5),2&n){let e;a.iGM(e=a.CRH())&&(r.table=e.first)}},decls:6,vars:5,consts:[[1,"page-style","users-page",2,"overflow-y","auto","height","100%"],["fxLayout","column",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"outer-div-padding"],["title","Users Table",3,"columns","ELEMENT_DATA","buttonTriggers","showAddUserButton"],["table",""],[2,"width","100%",3,"notificationBar"]],template:function(n,r){1&n&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.YNc(2,P,2,1,"ng-container",2),a.qZA(),a.TgZ(3,"div",3),a._UZ(4,"app-data-table",4,5),a.qZA(),a.qZA()),2&n&&(a.xp6(2),a.Q6J("ngForOf",r.notificationBars),a.xp6(2),a.Q6J("columns",r.columns)("ELEMENT_DATA",r.tableData)("buttonTriggers",r.buttonTriggers)("showAddUserButton",!0))},directives:[N.xw,D.sg,y.Q,T.F],styles:['.users-page[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-start, .users-page[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-end{background-color:#fff}.save-btn-mobile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.save-btn-mobile[_ngcontent-%COMP%]{margin:20px auto;padding:0!important}.dark-mode-mobile[_ngcontent-%COMP%]{padding:0!important}@keyframes spinner{to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #ffffff;border-top-color:#000;animation:spinner .8s linear infinite}']}),o})(),data:{animation:"LandingPageAnimation"}},{path:"**",redirectTo:""}];let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[c.Bz.forChild(A)],c.Bz]}),o})();var E=i(9958);let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[E.L,O]]}),o})()}}]);