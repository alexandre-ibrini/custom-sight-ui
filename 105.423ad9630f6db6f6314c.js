"use strict";(self.webpackChunkideal_app=self.webpackChunkideal_app||[]).push([[105],{5720:(Z,M,r)=>{r.d(M,{B:()=>i});var e=r(7238);const i=(0,e.X$)("simpleFadeAnimation",[(0,e.SB)("in",(0,e.oB)({opacity:1})),(0,e.eR)(":enter",[(0,e.oB)({opacity:0}),(0,e.jt)(600)]),(0,e.eR)(":leave",(0,e.jt)(600,(0,e.oB)({opacity:0})))])},4244:(Z,M,r)=>{r.d(M,{F:()=>B});var e=r(5720),i=r(3772),u=r(7716),y=r(1327),g=r(6986),P=r(5618),T=r(8583),D=r(249);function x(_,E){if(1&_){const p=u.EpF();u.TgZ(0,"div",3),u.NdJ("click",function(){u.CHM(p);const A=u.oxw();return A.closeClicked(A.notificationBar.id)}),u._UZ(1,"i",4),u.qZA()}}const O=function(_){return[_]};let B=(()=>{class _{constructor(p,h){this.notificationBarMiddleware=p,this.appShellService=h,this.notificationBar={closable:!1,id:"",content:"",timer:null,severity:-1},this.iconClass="bi-info",this.outerDivSeverityClass="outerDivInfo",this.severityEnum=i.l,this.isSideNavOpened=!1}setClassesFromSeverity(){switch(this.notificationBar.severity){case i.l.INFO:this.iconClass="bi-info-circle",this.outerDivSeverityClass="outerDivInfo";break;case i.l.WARNING:this.iconClass="bi-exclamation-circle",this.outerDivSeverityClass="outerDivWarning";break;case i.l.FATAL:this.iconClass="bi-x-circle fatal-icon",this.outerDivSeverityClass="outerDivFatal"}}closeClicked(p){this.notificationBarMiddleware.removeNotificationBar(p)}ngOnInit(){this.appShellService.sideNavOpenedStatus.subscribe(p=>{this.isSideNavOpened=p}),this.setClassesFromSeverity(),this.notificationBar.timer&&this.notificationBar.timer>0&&setTimeout(()=>this.notificationBarMiddleware.removeNotificationBar(this.notificationBar.id),this.notificationBar.timer)}}return _.\u0275fac=function(p){return new(p||_)(u.Y36(y.Y),u.Y36(g.c))},_.\u0275cmp=u.Xpm({type:_,selectors:[["app-notification-bar"]],inputs:{notificationBar:"notificationBar"},decls:6,vars:10,consts:[["fxLayout","row","fxLayoutAlign","space-between center",3,"ngClass"],["fxLayoutAlign","start center","fxLayoutGap","20px"],["style","cursor:pointer",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],[1,"bi","bi-x"]],template:function(p,h){1&p&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"i"),u.TgZ(3,"span"),u._uU(4),u.qZA(),u.qZA(),u.YNc(5,x,2,0,"div",2),u.qZA()),2&p&&(u.Tol("notificationBarOuterDiv "+h.outerDivSeverityClass),u.Q6J("@simpleFadeAnimation","in")("ngClass",u.VKq(8,O,h.isSideNavOpened?"outerDivWidthOpened":"outerDivWidthClosed")),u.xp6(2),u.Tol("bi "+h.iconClass),u.xp6(2),u.Oqu(h.notificationBar.content),u.xp6(1),u.Q6J("ngIf",h.notificationBar.closable))},directives:[P.xw,P.Wh,T.mk,D.oO,P.SQ,T.O5],styles:[".notificationBarOuterDiv[_ngcontent-%COMP%]{background-color:#ededed;min-height:32px;padding:0 16px;position:sticky;z-index:100;color:#fff;width:100%}.fatal-icon[_ngcontent-%COMP%]{color:#fff}.warning-icon[_ngcontent-%COMP%]{color:#fff}.info-icon[_ngcontent-%COMP%]{color:#fff}.outerDivInfo[_ngcontent-%COMP%]{background-color:#e4ecf7!important;color:#000}.outerDivWarning[_ngcontent-%COMP%]{background-color:#ffba7d!important;color:#fff}.outerDivFatal[_ngcontent-%COMP%]{background-color:#ff7d7d!important;color:#fff}"],data:{animation:[e.B]}}),_})()},3398:(Z,M,r)=>{r.d(M,{U:()=>S});var e=r(7716),i=r(3815),y=r(1295),g=r(6215),P=r(5917),T=r(3190),D=r(4395),x=r(8583),O=r(5618),B=r(1095),_=r(8295),E=r(9983),p=r(3679);const h=["tree"];function A(m,v){if(1&m){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",13),e.NdJ("ngModelChange",function(s){e.CHM(t);const d=e.oxw(2).$implicit;return e.oxw(2).ngModelChanged(d,s)}),e.qZA(),e.qZA()}if(2&m){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("type",t.data.displayType)("placeholder",t.data.name)("ngModel",t.data.value)}}function w(m,v){if(1&m&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&m){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.data.value)}}function b(m,v){if(1&m&&(e.TgZ(0,"div",11),e.YNc(1,A,2,3,"mat-form-field",12),e.YNc(2,w,2,1,"span",12),e.qZA()),2&m){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.areValuesEditable),e.xp6(1),e.Q6J("ngIf",!t.areValuesEditable)}}function L(m,v){if(1&m&&(e.TgZ(0,"div",9),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,b,3,2,"div",10),e.qZA()),2&m){const t=v.$implicit;e.xp6(2),e.Oqu(t.data.name),e.xp6(1),e.Q6J("ngIf",null!==t.data.value&&(null==t.data||null==t.data.children?null:t.data.children.length)<=0)}}function I(m,v){if(1&m){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"mat-form-field"),e.TgZ(3,"input",5),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().searchFieldValue=s})("ngModelChange",function(s){return e.CHM(t),e.oxw().setSearchSubjectNext(s)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"tree-root",6,7),e.YNc(6,L,4,2,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()}if(2&m){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.searchFieldValue),e.xp6(1),e.Q6J("nodes",t.dataSource)("options",t.treeOptions)}}let S=(()=>{class m{constructor(){this.data=new e.IIB,this.areValuesEditable=new e.IIB,this.submitPressed=new e.vpe,this.dataSource=new Array,this.treeOptions={animateExpand:!0,displayField:"name",allowDragoverStyling:!1,allowDrag:!1,allowDrop:!1,actionMapping:{mouse:{click:y.iM.TOGGLE_EXPANDED}}},this.searchFieldValue="",this.searchSubject=new g.X(null),this.hasChild=(t,a)=>!!a.children&&a.children.length>0}setSearchSubjectNext(t){this.searchSubject.next(t)}search(t){var a;this.tree.treeModel.filterNodes(s=>s.data.name.includes(t),!1),null===(a=this.tree.treeModel.getVisibleRoots())||void 0===a||a.forEach(s=>{this.setNodesVisibleRecursive(s)})}setNodesVisibleRecursive(t){var a;t.setIsHidden(!1),null===(a=t.children)||void 0===a||a.forEach(s=>{this.setNodesVisibleRecursive(s)})}setData(t){this.data=t,this.dataSource=(0,i.cloneDeep)(t),this.changedValues=!1}ngModelChanged(t,a){t.data.value="number"===t.data.displayType?Number(a):a,this.onValueChange(t)}ngOnInit(){this.dataSource=(0,i.cloneDeep)(this.data),this.searchSubject.pipe((0,T.w)(t=>(0,P.of)(t)),(0,D.b)(300)).subscribe(t=>{null!=t&&this.search(t)})}onValueChange(t){this.changedValues||(this.changedValues={});const a=this.getNodePathsList(t),s=a[a.length-2].isArray,d=s?a[a.length-2].id:null,l=s?Number(a[a.length-1].name):null;this.setNestedKeys(this.changedValues,a,t.data.value,d,l)}setNestedKeys(t,a,s,d,l){d&&l>=0&&a.splice(a.length-1,1),a.forEach((n,c)=>{if(d&&l>=0)c===a.length-1?(t[n.name]||(t[n.name]=this.findArrayValues(d)),t[n.name][l]=s):t[n.name]||(t[n.name]=t[n.name]?t[n.name]:{});else if(c===a.length-1)t[n.name]=s||t[n.name];else if(t[n.name])t[n.name]=t[n.name];else if(n.isArray){t[n.name]=[];const o=this.getMidObjectArrayValues(n.id);t[n.name].push(...o),a[c+1]=Number(a[c+1])}else t[n.name]={};t=t[n.name]})}getMidObjectArrayValues(t){var a;const s=this.getCurrentObjectById(t),d=[];return null===(a=null==s?void 0:s.children)||void 0===a||a.forEach((l,n)=>{var c;d[n]={},null===(c=null==l?void 0:l.children)||void 0===c||c.forEach(o=>{this.getNestedKeysfromDataObject(o,d[n])})}),d}getNestedKeysfromDataObject(t,a){var s;if(t.isArray){const d=[];null===(s=null==t?void 0:t.children)||void 0===s||s.forEach((l,n)=>{var c;l.value?d[n]=l.value:(d[n]={},null===(c=null==l?void 0:l.children)||void 0===c||c.forEach(o=>{this.getNestedKeysfromDataObject(o,d[n])}))}),a||(a={}),a[t.name]=d}else a||(a={}),t.children?t.children.forEach((d,l)=>a[t.name]=this.getNestedKeysfromDataObject(d,a[t.name])):a[t.name]=t.value;return a}getCurrentObjectById(t){var a;const s=t.split(".");let d=this.dataSource.find(n=>(null==n?void 0:n.id)===s[0]),l=1;for(;l<s.length;){const n=s.slice(0,l+1).join(".");d=null===(a=null==d?void 0:d.children)||void 0===a?void 0:a.find(c=>(null==c?void 0:c.id)===n),l++}return d}findArrayValues(t){var a;const s=this.getCurrentObjectById(t);let d=[];return d=null===(a=null==s?void 0:s.children)||void 0===a?void 0:a.map(l=>null==l?void 0:l.value),d}getObjectNestedPathsList(t){var a,s;const d=[];return d.push([{id:t.id,name:t.name,isArray:t.isArray}]),(null===(a=null==t?void 0:t.children)||void 0===a?void 0:a.length)>0&&(null===(s=null==t?void 0:t.children)||void 0===s||s.forEach((l,n)=>{d.push(this.getObjectNestedPathsList(l))})),d}getNodePathsList(t){var a,s,d;let l=t;const n=[];for(;l&&!l.data.virtual;){const c={id:null===(a=l.data)||void 0===a?void 0:a.id,name:null===(s=null==l?void 0:l.data)||void 0===s?void 0:s.name,isArray:null===(d=null==l?void 0:l.data)||void 0===d?void 0:d.isArray};n.splice(0,0,c),l=l.parent}return n}submit(){this.submitPressed.emit(this.changedValues)}reset(){this.dataSource=(0,i.cloneDeep)(this.data),this.changedValues={}}}return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-nested-tree"]],viewQuery:function(t,a){if(1&t&&e.Gf(h,5),2&t){let s;e.iGM(s=e.CRH())&&(a.tree=s.first)}},inputs:{data:"data",areValuesEditable:"areValuesEditable"},outputs:{submitPressed:"submitPressed"},decls:4,vars:2,consts:[["style","height:100%; overflow: auto;",4,"ngIf"],["fxLayout","row","fxLayoutGap","16px",1,"submit-button-div"],["mat-flat-button","","color","accent",3,"disabled","click"],[2,"height","100%","overflow","auto"],[1,"search-div"],["matInput","","placeholder","Search","type","text",3,"ngModel","ngModelChange"],[1,"tree",3,"nodes","options"],["tree",""],["treeNodeTemplate",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","64px",2,"width","100%"],["fxLayoutGap","16px",4,"ngIf"],["fxLayoutGap","16px"],[4,"ngIf"],["matInput","",3,"type","placeholder","ngModel","ngModelChange"]],template:function(t,a){1&t&&(e.YNc(0,I,8,3,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return a.submit()}),e._uU(3,"Submit"),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",(null==a.dataSource?null:a.dataSource.length)>0),e.xp6(2),e.Q6J("disabled",!a.changedValues))},directives:[x.O5,O.xw,O.SQ,B.lW,_.KE,E.Nt,p.Fj,p.JJ,p.On,y.qr,O.Wh],styles:[".submit-button-div[_ngcontent-%COMP%]{position:fixed;bottom:5%;right:5%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content}.search-div[_ngcontent-%COMP%]{position:absolute;z-index:100;top:10%;right:5%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content}.tree[_ngcontent-%COMP%]  .node-content-wrapper-active, .node-content-wrapper.node-content-wrapper-active[_ngcontent-%COMP%]:hover, .node-content-wrapper-active.node-content-wrapper-focused[_ngcontent-%COMP%]{background:transparent!important}.tree[_ngcontent-%COMP%]  .node-content-wrapper-active, .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:none!important}.tree[_ngcontent-%COMP%]::ngdeep   .node-content-wrapper-focused[_ngcontent-%COMP%]{background:transparent!important}"]}),m})()},7105:(Z,M,r)=>{r.r(M),r.d(M,{PersistentParametersModule:()=>l});var e=r(5987),i=r(7716),u=r(1327),y=r(5939),g=r(5618),P=r(8583),T=r(5418),D=r(1095),x=r(3398);const O=["tree"];function B(n,c){if(1&n){const o=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"button",5),i.NdJ("click",function(){return i.CHM(o),i.oxw().reloadParams()}),i.TgZ(3,"div",6),i._UZ(4,"i",7),i.TgZ(5,"span",8),i._uU(6,"Reload Params"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"app-nested-tree",9,10),i.NdJ("submitPressed",function(C){return i.CHM(o),i.oxw().submitPressed(C)}),i.qZA(),i.qZA()}if(2&n){const o=i.oxw();i.xp6(7),i.Q6J("data",o.data)}}let _=(()=>{class n{constructor(o){this.middleware=o,this.subscriptions=[],this.data=[]}submitPressed(o){this.middleware.sendSetPersistentParams(o)}ngOnInit(){this.subscriptions.push(this.middleware.PersistentParams.subscribe(o=>{var f;o&&(this.data=o,null===(f=this.tree)||void 0===f||f.setData(o))})),this.middleware.sendRequestPersistentParams()}reloadParams(){this.middleware.sendRequestPersistentParams()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return n.\u0275fac=function(o){return new(o||n)(i.Y36(T.G))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-parameters-tab"]],viewQuery:function(o,f){if(1&o&&i.Gf(O,5),2&o){let C;i.iGM(C=i.CRH())&&(f.tree=C.first)}},decls:3,vars:1,consts:[[1,"outer-div-padding"],["fxLayout","row wrap","fxLayoutGap.lt-md","7px","fxLayoutGap","16px",2,"height","100%"],["class","page-components unselectable full-width-mobile","style"," min-width: 260px; width: 100%; height:100%;",4,"ngIf"],[1,"page-components","unselectable","full-width-mobile",2,"min-width","260px","width","100%","height","100%"],["fxLayoutAlign","center center",1,"reloadButtonDiv"],["mat-flat-button","","color","accent",3,"click"],["fxLayoutAlign","center center","fxLayoutGap","8px"],["fxFlexAlign","end",1,"bi","bi-arrow-clockwise"],[2,"vertical-align","center"],[3,"data","submitPressed"],["tree",""]],template:function(o,f){1&o&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.YNc(2,B,9,1,"div",2),i.qZA(),i.qZA()),2&o&&(i.xp6(2),i.Q6J("ngIf",(null==f.data?null:f.data.length)>0))},directives:[g.xw,g.SQ,P.O5,g.Wh,D.lW,g.XD,x.U],styles:[".reloadButtonDiv[_ngcontent-%COMP%]{width:100;position:fixed;bottom:10%;right:5%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;z-index:100}"]}),n})();var E=r(4244);function p(n,c){if(1&n&&(i.ynx(0),i._UZ(1,"app-notification-bar",6),i.BQk()),2&n){const o=c.$implicit;i.xp6(1),i.Q6J("notificationBar",o)}}const A=[{path:"",component:(()=>{class n{constructor(o){this.notificationBarMiddleware=o,this.notificationBars=[]}ngOnInit(){this.notificationBarMiddleware.notificationBars.subscribe(o=>{this.notificationBars=o})}}return n.\u0275fac=function(o){return new(o||n)(i.Y36(u.Y))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-persistent-parameters"]],decls:7,vars:1,consts:[[1,"page-style","persisten-params"],["color","primary","mat-align-tabs","start",2,"height","100%"],["label","Params"],["fxLayout","column",2,"width","100%"],[4,"ngFor","ngForOf"],[2,"overflow","auto"],[2,"width","100%",3,"notificationBar"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0),i.TgZ(1,"mat-tab-group",1),i.TgZ(2,"mat-tab",2),i.TgZ(3,"div",3),i.YNc(4,p,2,1,"ng-container",4),i.qZA(),i.TgZ(5,"div",5),i._UZ(6,"app-parameters-tab"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&o&&(i.xp6(4),i.Q6J("ngForOf",f.notificationBars))},directives:[y.SP,y.uX,g.xw,P.sg,_,E.F],styles:[""]}),n})(),data:{animation:"LandingPageAnimation"}},{path:"**",redirectTo:""}];let w=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[[e.Bz.forChild(A)],e.Bz]}),n})();var b=r(2511),L=r(3815);const I={type:"get_persistent_params",data:{}},S={type:"config",data:{config:{},request:"set"}};var m=r(3065),v=r(7195);let t=(()=>{class n{constructor(o,f,C){this.store=o,this.websocket=f,this.middleware=C,C.requestPersistentParams.subscribe(N=>{N&&this.requestPersistentParams()}),C.setPersistentParams.subscribe(N=>{N&&this.setPersistentParams(N)})}requestPersistentParams(){this.websocket.sendMessage(I)}setPersistentParams(o){let f=(0,L.cloneDeep)(S);f.data.config=o,this.websocket.sendMessage(f)}}return n.\u0275fac=function(o){return new(o||n)(i.LFG(m.yh),i.LFG(v.i),i.LFG(T.G))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a=r(2986),s=r(1172);let d=(()=>{class n{constructor(o){this.persistentParamsApiService=o}}return n.\u0275fac=function(o){return new(o||n)(i.LFG(t))},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[T.G,t,s.T],imports:[[P.ez,m.Aw.forFeature(a.O)]]}),n})(),l=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[[b.L,w,d]]}),n})()}}]);