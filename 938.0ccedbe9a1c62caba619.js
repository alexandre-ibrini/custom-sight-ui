"use strict";(self.webpackChunkideal_app=self.webpackChunkideal_app||[]).push([[938],{4938:(L,u,i)=>{i.r(u),i.d(u,{UsersModule:()=>O});var g=i(5987),b=i(9021),m=i(9860),c=i(5285),p=i(4286),f=i(5351),v=i(5063),a=i(7716),h=i(3065),C=i(5592),R=i(1530),M=i(2558),B=i(5618),U=i(8583),D=i(8328),N=i(1356);const y=["table"];function x(o,r){if(1&o&&(a.ynx(0),a._UZ(1,"app-notification-bar",6),a.BQk()),2&o){const n=r.$implicit;a.xp6(1),a.Q6J("notificationBar",n)}}const P=[{path:"",component:(()=>{class o{constructor(n,e,l,s){this.store=n,this.editUserDialogService=e,this.jwtService=l,this.notificationBarMiddleware=s,this.subscriptions=[],this.columns=[{id:"username",name:"Username",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"firstName",name:"First Name",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"lastName",name:"Last Name",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"email",name:"Email",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"address",name:"Address",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"phoneNumber",name:"Phone Number",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"dateCreated",name:"Date Created",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"dateModified",name:"Date Modified",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"role",name:"Role",badge:{badgeCell:!0,badgeColorRule:t=>"#425466",badgeValueRule:t=>t,badgeBackgroundColorRule:t=>"transparent"}},{id:"edit",name:"",button:!0},{id:"delete",name:"",button:!0}],this.buttonTriggers={edit:{buttonName:"Edit",trigger:t=>{let E=this.tableData.find(d=>d.id===t);this.editUserDialogService.openDialog(E,!0,d=>{this.store.dispatch((0,p.o)({updateUserByIdRequest:{id:d.id,email:d.email,firstName:d.firstName,lastName:d.lastName,phoneNumber:d.phoneNumber,address:d.address,role:d.role}}))})}},delete:{buttonName:"Delete",trigger:t=>{this.store.dispatch((0,m.a)({deleteUserRequest:t}))}}},this.tableData=[],this.notificationBars=[]}ngOnInit(){this.subscriptions.push(this.notificationBarMiddleware.notificationBars.subscribe(n=>{this.notificationBars=n}),this.store.select(v.Rv).subscribe(n=>{n&&((n=n.filter(e=>parseInt(e.id)!==this.jwtService.getId())).forEach(e=>{let l=this.tableData.findIndex(s=>s.id===e.id);-1===l?this.tableData.push({id:e.id,username:null==e?void 0:e.username,firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,email:null==e?void 0:e.email,address:null==e?void 0:e.address,phoneNumber:null==e?void 0:e.phoneNumber,dateCreated:null==e?void 0:e.dateCreated.toLocaleDateString(),dateModified:null==e?void 0:e.dateModified.toLocaleDateString(),role:null==e?void 0:e.role,edit:!0}):this.tableData[l]=Object.assign(Object.assign({},e),{dateCreated:null==e?void 0:e.dateCreated.toLocaleDateString(),dateModified:null==e?void 0:e.dateModified.toLocaleDateString()})}),this.tableData.forEach((e,l)=>{-1===n.findIndex(t=>t.id===e.id)&&this.tableData.splice(l,1)}),this.table&&this.table.setTableData(this.tableData))}),this.store.select(f.PW).subscribe(n=>{this.store.dispatch((0,c.I)())})),this.store.dispatch((0,c.I)())}checkIfMobile(){return b.b.checkIfMobile()}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(h.yh),a.Y36(C.i),a.Y36(R.T),a.Y36(M.Y))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-users-page"]],viewQuery:function(n,e){if(1&n&&a.Gf(y,5),2&n){let l;a.iGM(l=a.CRH())&&(e.table=l.first)}},decls:6,vars:5,consts:[[1,"page-style","users-page",2,"overflow-y","auto","height","100%"],["fxLayout","column",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"outer-div-padding"],["title","Users Table",3,"columns","ELEMENT_DATA","buttonTriggers","showAddUserButton"],["table",""],[2,"width","100%",3,"notificationBar"]],template:function(n,e){1&n&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.YNc(2,x,2,1,"ng-container",2),a.qZA(),a.TgZ(3,"div",3),a._UZ(4,"app-data-table",4,5),a.qZA(),a.qZA()),2&n&&(a.xp6(2),a.Q6J("ngForOf",e.notificationBars),a.xp6(2),a.Q6J("columns",e.columns)("ELEMENT_DATA",e.tableData)("buttonTriggers",e.buttonTriggers)("showAddUserButton",!0))},directives:[B.xw,U.sg,D.Q,N.F],styles:['.users-page[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-start, .users-page[_ngcontent-%COMP%]  .mat-form-field-appearance-outline .mat-form-field-outline-end{background-color:#fff}.save-btn-mobile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.save-btn-mobile[_ngcontent-%COMP%]{margin:20px auto;padding:0!important}.dark-mode-mobile[_ngcontent-%COMP%]{padding:0!important}@keyframes spinner{to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #ffffff;border-top-color:#000;animation:spinner .8s linear infinite}']}),o})(),data:{animation:"LandingPageAnimation"}},{path:"**",redirectTo:""}];let T=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[g.Bz.forChild(P)],g.Bz]}),o})();var A=i(9958);let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[A.L,T]]}),o})()}}]);