"use strict";(self.webpackChunkros_fe_poc=self.webpackChunkros_fe_poc||[]).push([[472],{9472:(le,_,d)=>{d.r(_),d.d(_,{PersistentParamsModule:()=>ie});var O=d(5939),g=d(6983),P=d(8583),C=d(6215),F=d(5917),V=d(3190),E=d(4395),t=d(7716),f=d(3815);const I={type:"get_persistent_params",data:{}},L={type:"config",data:{config:{},request:"set"}};var p=d(3065);const M=(0,p.PH)("[PersistentParams] Update PersistentParams",(0,p.Ky)()),Q=(0,p.Lq)({loading:!1,persistentParams:null},(0,p.on)(M,(a,l)=>Object.assign(Object.assign({},a),{persistentParams:l.persistentParams}))),x=(0,p.Tz)({name:"persistentParams",reducer:Q}),G=(0,p.P1)(x.selectPersistentParams,a=>a);let w=(()=>{class a{constructor(){this.getDisplayType=e=>"number"==typeof e?"number":"text"}mapFromDtoToViewModel(e){return this.getChildrenRecursive(e)}getChildrenRecursive(e,n){var s;let r,i=[],o=1;n?i=n.split("."):r="1";let c=this.getObjectKeys(e);if((null==c?void 0:c.length)<=0)return[];let S,m=[];for(let v of c){r=null==i?void 0:i.concat(o.toString()).join(".");let y=(null===(s=this.getObjectKeys(e[v]))||void 0===s?void 0:s.length)>0&&"string"!=typeof e[v],oe=y&&Array.isArray(e[v]);S={id:r,parentId:n,name:v,children:y?this.getChildrenRecursive(e[v],r):null,value:y?null:e[v],isArray:oe,displayType:y?null:this.getDisplayType(e[v])},m.push(S),o++}return m}getObjectKeys(e){if(e){let n=[];for(const s in e)n.push(s);return n}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var R=d(992),B=d(7736);let A=(()=>{class a{constructor(e,n,s,i){this.store=e,this.mapper=n,this.responseMS=s,this.linkService=i,this.responseMS.get_persistent_params.subscribe(r=>{this.receivePersistentParams(null==r?void 0:r.data)})}get PersistentParams(){return this.store.select(G)}requestPersistentParams(){let e=(0,f.cloneDeep)(I);this.linkService.sendMessage(e)}receivePersistentParams(e){let n=this.mapper.mapFromDtoToViewModel(e);this.store.dispatch(M({persistentParams:n}))}setPersistentParams(e){let n=(0,f.cloneDeep)(L);n.data.config=e,this.linkService.sendMessage(n)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(p.yh),t.LFG(w),t.LFG(R.B),t.LFG(B.X))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var u=d(7093),Z=d(8295),N=d(9983),h=d(3679),b=d(1095),T=d(1295);const K=["tree"];function z(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field"),t.TgZ(1,"input",11),t.NdJ("ngModelChange",function(s){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw(2).ngModelChanged(i,s)}),t.qZA(),t.qZA()}if(2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("type",e.data.displayType)("placeholder",e.data.name)("ngModel",e.data.value)}}function q(a,l){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.data.value)}}function H(a,l){if(1&a&&(t.TgZ(0,"div",9),t.YNc(1,z,2,3,"mat-form-field",10),t.YNc(2,q,2,1,"span",10),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.areValuesEditable),t.xp6(1),t.Q6J("ngIf",!e.areValuesEditable)}}function U(a,l){if(1&a&&(t.TgZ(0,"div",7),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.YNc(3,H,3,2,"div",8),t.qZA()),2&a){const e=l.$implicit;t.xp6(2),t.Oqu(e.data.name),t.xp6(1),t.Q6J("ngIf",null!==e.data.value&&(null==e.data||null==e.data.children?null:e.data.children.length)<=0)}}function Y(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"tree-root",3,4),t.YNc(4,U,4,2,"ng-template",null,5,t.W1O),t.qZA(),t.qZA(),t.TgZ(6,"div"),t.TgZ(7,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(8,"Submit"),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("nodes",e.dataSource)("options",e.treeOptions),t.xp6(5),t.Q6J("disabled",!e.changedValues)}}let X=(()=>{class a{constructor(){this.data=new t.IIB,this.areValuesEditable=new t.IIB,this.submitPressed=new t.vpe,this.dataSource=new Array,this.hasChild=(e,n)=>!!n.children&&n.children.length>0,this.treeOptions={animateExpand:!0,displayField:"name",allowDragoverStyling:!1,allowDrag:!1,allowDrop:!1,actionMapping:{mouse:{click:T.iM.TOGGLE_EXPANDED}}},this.searchSubject=new C.X(null)}search(e){var n;this.tree.treeModel.filterNodes(s=>s.data.name.includes(e),!1),null===(n=this.tree.treeModel.getVisibleRoots())||void 0===n||n.forEach(s=>{this.setNodesVisibleRecursive(s)})}setNodesVisibleRecursive(e){var n;e.setIsHidden(!1),null===(n=e.children)||void 0===n||n.forEach(s=>{this.setNodesVisibleRecursive(s)})}setData(e){this.data=e,this.dataSource=(0,f.cloneDeep)(e),this.changedValues=!1}ngModelChanged(e,n){e.data.value="number"===e.data.displayType?Number(n):n,this.onValueChange(e)}ngOnInit(){this.dataSource=(0,f.cloneDeep)(this.data)}onValueChange(e){this.changedValues||(this.changedValues={});let n=this.getNodePathsList(e),s=n[n.length-2].isArray,i=s?n[n.length-2].id:null,r=s?Number(n[n.length-1].name):null;this.setNestedKeys(this.changedValues,n,e.data.value,i,r)}setNestedKeys(e,n,s,i,r){i&&r>=0&&n.splice(n.length-1,1),n.forEach((o,c)=>{if(i&&r>=0)c===n.length-1?(e[o.name]||(e[o.name]=this.findArrayValues(i)),e[o.name][r]=s):e[o.name]||(e[o.name]=e[o.name]?e[o.name]:{});else if(c===n.length-1)e[o.name]=s||e[o.name];else if(e[o.name])e[o.name]=e[o.name];else if(o.isArray){e[o.name]=[];let m=this.getMidObjectArrayValues(o.id);e[o.name].push(...m),n[c+1]=Number(n[c+1])}else e[o.name]={};e=e[o.name]})}getMidObjectArrayValues(e){var n;let s=this.getCurrentObjectById(e),i=[];return null===(n=null==s?void 0:s.children)||void 0===n||n.forEach((r,o)=>{var c;i[o]={},null===(c=null==r?void 0:r.children)||void 0===c||c.forEach(m=>{this.getNestedKeysFromDataObject(m,i[o])})}),i}getNestedKeysFromDataObject(e,n){var s;if(e.isArray){let i=[];null===(s=null==e?void 0:e.children)||void 0===s||s.forEach((r,o)=>{var c;r.value?i[o]=r.value:(i[o]={},null===(c=null==r?void 0:r.children)||void 0===c||c.forEach(m=>{this.getNestedKeysFromDataObject(m,i[o])}))}),n||(n={}),n[e.name]=i}else n||(n={}),e.children?e.children.forEach((i,r)=>n[e.name]=this.getNestedKeysFromDataObject(i,n[e.name])):n[e.name]=e.value;return n}getCurrentObjectById(e){var n;let s=e.split("."),i=this.dataSource.find(o=>(null==o?void 0:o.id)===s[0]),r=1;for(;r<s.length;){let o=s.slice(0,r+1).join(".");i=null===(n=null==i?void 0:i.children)||void 0===n?void 0:n.find(c=>(null==c?void 0:c.id)===o),r++}return i}findArrayValues(e){var n;let s=this.getCurrentObjectById(e),i=[];return i=null===(n=null==s?void 0:s.children)||void 0===n?void 0:n.map(r=>null==r?void 0:r.value),i}getObjectNestedPathsList(e){var n,s;let i=[];return i.push([{id:e.id,name:e.name,isArray:e.isArray}]),(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length)>0&&(null===(s=null==e?void 0:e.children)||void 0===s||s.forEach((r,o)=>{i.push(this.getObjectNestedPathsList(r))})),i}getNodePathsList(e){var n,s,i;let r=e,o=[];for(;r&&!r.data.virtual;){let c={id:null===(n=r.data)||void 0===n?void 0:n.id,name:null===(s=null==r?void 0:r.data)||void 0===s?void 0:s.name,isArray:null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.isArray};o.splice(0,0,c),r=r.parent}return o}submit(){this.submitPressed.emit(this.changedValues)}reset(){this.dataSource=(0,f.cloneDeep)(this.data),this.changedValues={}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-nested-tree"]],viewQuery:function(e,n){if(1&e&&t.Gf(K,5),2&e){let s;t.iGM(s=t.CRH())&&(n.tree=s.first)}},inputs:{data:"data",areValuesEditable:"areValuesEditable"},outputs:{submitPressed:"submitPressed"},decls:1,vars:1,consts:[["style","height:100%; overflow: auto;","fxLayout","row",4,"ngIf"],["fxLayout","row",2,"height","100%","overflow","auto"],["fxFlex",""],[1,"tree",3,"nodes","options"],["tree",""],["treeNodeTemplate",""],["mat-flat-button","","color","accent",3,"disabled","click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","64px",2,"width","100%"],["fxLayoutGap","16px",4,"ngIf"],["fxLayoutGap","16px"],[4,"ngIf"],["matInput","",3,"type","placeholder","ngModel","ngModelChange"]],template:function(e,n){1&e&&t.YNc(0,Y,9,3,"div",0),2&e&&t.Q6J("ngIf",n.dataSource.length>0)},directives:[P.O5,u.xw,u.yH,T.qr,b.lW,u.Wh,u.SQ,Z.KE,N.Nt,h.Fj,h.JJ,h.On],styles:[".tree[_ngcontent-%COMP%]  .node-content-wrapper-active, .node-content-wrapper.node-content-wrapper-active[_ngcontent-%COMP%]:hover, .node-content-wrapper-active.node-content-wrapper-focused[_ngcontent-%COMP%]{background:transparent!important}.tree[_ngcontent-%COMP%]  .node-content-wrapper-active, .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:none!important}.tree[_ngcontent-%COMP%]  .node-content-wrapper-focused{background:transparent!important}"]}),a})();const W=["tree"];function $(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"app-nested-tree",14,15),t.NdJ("submitPressed",function(s){return t.CHM(e),t.oxw().submitPressed(s)}),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("data",e.data)}}const k=[{path:"params",component:(()=>{class a{constructor(e){this.persistentParamsMS=e,this.searchFieldValue="",this.subscriptions=[],this.data=[],this.searchSubject=new C.X(null)}submitPressed(e){this.persistentParamsMS.setPersistentParams(e)}ngOnInit(){this.subscriptions.push(this.persistentParamsMS.PersistentParams.subscribe(e=>{var n;e&&(this.data=e,null===(n=this.tree)||void 0===n||n.setData(e))}),this.searchSubject.pipe((0,V.w)(e=>(0,F.of)(e)),(0,E.b)(300)).subscribe(e=>{null!=e&&this.tree.search(e)})),this.persistentParamsMS.requestPersistentParams()}reloadParams(){this.persistentParamsMS.requestPersistentParams()}setSearchSubjectNext(e){this.searchSubject.next(e)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-parameters-tab"]],viewQuery:function(e,n){if(1&e&&t.Gf(W,5),2&e){let s;t.iGM(s=t.CRH())&&(n.tree=s.first)}},decls:15,vars:3,consts:[[1,"outer-div-padding"],["fxLayout","row wrap","fxLayoutGap.lt-md","7px",2,"height","100%"],["fxLayout","row",1,"page-components","unselectable","full-width-mobile",2,"min-width","260px","width","100%","height","20%"],["fxFlex","50","fxLayoutGap","8px",1,"search-div"],[2,"width","100%",3,"appearance"],["fxFlexAlign","end",1,"bi","bi-search"],["matInput","","placeholder","Search","type","text",1,"search",3,"ngModel","ngModelChange"],["fxFlex",""],["mat-flat-button","",1,"reload-button",3,"click"],["fxLayoutAlign","center center"],["fxFlexAlign","end",1,"bi","bi-arrow-counterclockwise","icon-reload"],[2,"vertical-align","center"],["class","page-components unselectable full-width-mobile","style"," min-width: 260px; width: 100%; height:100%;",4,"ngIf"],[1,"page-components","unselectable","full-width-mobile",2,"min-width","260px","width","100%","height","100%"],[3,"data","submitPressed"],["tree",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"mat-form-field",4),t._UZ(5,"i",5),t.TgZ(6,"input",6),t.NdJ("ngModelChange",function(i){return n.searchFieldValue=i})("ngModelChange",function(i){return n.setSearchSubjectNext(i)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(7,"div",7),t.TgZ(8,"div"),t.TgZ(9,"button",8),t.NdJ("click",function(){return n.reloadParams()}),t.TgZ(10,"div",9),t._UZ(11,"i",10),t.TgZ(12,"span",11),t._uU(13,"Reload"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(14,$,3,1,"div",12),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("appearance","standard"),t.xp6(2),t.Q6J("ngModel",n.searchFieldValue),t.xp6(8),t.Q6J("ngIf",n.data.length>0))},directives:[u.xw,u.SQ,u.yH,Z.KE,u.XD,N.Nt,h.Fj,h.JJ,h.On,b.lW,u.Wh,P.O5,X],styles:[".reload-button[_ngcontent-%COMP%]{background-color:var(--grey-color);border-radius:20px;font-weight:bold}.icon-reload[_ngcontent-%COMP%]{position:relative;font-size:20px;transform:rotate(320deg)}.search-div[_ngcontent-%COMP%]{height:35px}.search[_ngcontent-%COMP%]{height:100%;width:70%;padding-left:5px}.bi-search[_ngcontent-%COMP%]{font-size:13px;position:relative;top:-2px}  .mat-form-field-underline{display:none}  .mat-form-field-infix{border:0;margin-left:20px;padding:0}"]}),a})()},{path:"**",redirectTo:"params"}];let j=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[g.Bz.forChild(k)],g.Bz]}),a})();var ee=d(7909);let te=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[A,w],imports:[[P.ez,p.Aw.forFeature(x)]]}),a})();var ne=d(9904),ae=d(980),se=d(4975),re=d(2674);let ie=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[P.ez,j,ee.o9,g.Bz.forChild([]),ne.A,g.Bz,O.Nh,ae.G,T.xc,h.u5,se.Q,re.z,te]]}),a})()}}]);