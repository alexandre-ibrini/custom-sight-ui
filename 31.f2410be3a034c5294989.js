(self.webpackChunkros_fe_poc=self.webpackChunkros_fe_poc||[]).push([[31],{49457:function(I,A){var i,v;void 0!==(v="function"==typeof(i=function(){"use strict";function _(d,o,T){var l=new XMLHttpRequest;l.open("GET",d),l.responseType="blob",l.onload=function(){L(l.response,o,T)},l.onerror=function(){console.error("could not download file")},l.send()}function u(d){var o=new XMLHttpRequest;o.open("HEAD",d,!1);try{o.send()}catch(T){}return 200<=o.status&&299>=o.status}function y(d){try{d.dispatchEvent(new MouseEvent("click"))}catch(T){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(o)}}var k="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,w=k.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=k.saveAs||("object"!=typeof window||window!==k?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(d,o,T){var l=k.URL||k.webkitURL,g=document.createElement("a");g.download=o=o||d.name||"download",g.rel="noopener","string"==typeof d?(g.href=d,g.origin===location.origin?y(g):u(g.href)?_(d,o,T):y(g,g.target="_blank")):(g.href=l.createObjectURL(d),setTimeout(function(){l.revokeObjectURL(g.href)},4e4),setTimeout(function(){y(g)},0))}:"msSaveOrOpenBlob"in navigator?function(d,o,T){if(o=o||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function(d,o){return void 0===o?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,T),o);else if(u(d))_(d,o,T);else{var l=document.createElement("a");l.href=d,l.target="_blank",setTimeout(function(){y(l)})}}:function(d,o,T,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof d)return _(d,o,T);var g="application/octet-stream"===d.type,B=/constructor/i.test(k.HTMLElement)||k.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||g&&B||w)&&"undefined"!=typeof FileReader){var M=new FileReader;M.onloadend=function(){var b=M.result;b=f?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=b:location=b,l=null},M.readAsDataURL(d)}else{var m=k.URL||k.webkitURL,O=m.createObjectURL(d);l?l.location=O:location.href=O,l=null,setTimeout(function(){m.revokeObjectURL(O)},4e4)}});k.saveAs=L.saveAs=L,I.exports=L})?i.apply(A,[]):i)&&(I.exports=v)},81647:(I,A,i)=>{"use strict";i.d(A,{h:()=>v});var h=i(37716);let v=(()=>{class e{constructor(){}mapFromViewModelToDtoModel(){}mapFromDtoModelArrayToViewModelArray(u){let y=[];return u.forEach(k=>{y.push(this.mapFromDtoModelToViewModel(k))}),y}mapFromDtoModelToViewModel(u){return{fullPath:u.path,name:u.name,createdDate:new Date(u.createdDate),lastModifiedDate:new Date(u.lastModifiedDate),isDir:u.isDir,children:u.isDir?[]:null}}}return e.\u0275fac=function(u){return new(u||e)},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},71013:(I,A,i)=>{"use strict";i.d(A,{T:()=>M});var h=i(91841),v=i(23815),e=i(26215),_=i(92340),u=i(84365),y=i(57788),k=i(23065),w=i(38223);const L=(0,k.P1)(w.N.selectLoading,m=>m),d=(0,k.P1)(w.N.selectRequestedPath,m=>m),o=(0,k.P1)(w.N.selectLogs,m=>m);var T=i(49457),l=i(37716),g=i(81647),B=i(70992),f=i(67736);let M=(()=>{class m{constructor(b,S,G,F,Y){this.logsMapperService=b,this.store=S,this.responseMS=G,this.linkService=F,this.http=Y,this.newRequest=new e.X(null),this.responseMS.get_logs.subscribe(C=>{var P;C&&this.receiveLogs(null===(P=null==C?void 0:C.data)||void 0===P?void 0:P.logs)}),this.responseMS.get_compressed_files.subscribe(C=>{var P;this.handleCompressedFilesResponse(null===(P=null==C?void 0:C.data)||void 0===P?void 0:P.name)})}get requestedPath(){return this.store.select(d)}get logs(){return this.store.select(o)}get loading(){return this.store.select(L)}receiveLogs(b){let S=this.logsMapperService.mapFromDtoModelArrayToViewModelArray(b);this.store.dispatch((0,y.iS)({logs:S})),this.store.dispatch((0,y.EX)({loading:!1}))}downloadLogs(b){let S=(0,v.cloneDeep)(u.L);S.data.files=b,this.linkService.sendMessage(S)}handleCompressedFilesResponse(b){let S=new h.WM({Token:localStorage.getItem("access_token"),"Access-Control-Allow-Origin":"*"});this.http.get(_.N.APIEndpoint.slice(0,-1)+b,{headers:S,responseType:"blob"}).subscribe(G=>{let F=null==b?void 0:b.split("/");F=F[F.length-1],(0,T.saveAs)(G,F)})}clearLogs(){this.store.dispatch((0,y.Cs)())}requestLogs(b){let S=(0,v.cloneDeep)(u.p);S.data.directory=b,this.linkService.sendMessage(S),this.store.dispatch((0,y.xA)({requestedPath:b})),this.store.dispatch((0,y.EX)({loading:!0}))}}return m.\u0275fac=function(b){return new(b||m)(l.LFG(g.h),l.LFG(k.yh),l.LFG(B.B),l.LFG(f.X),l.LFG(h.eN))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},84365:(I,A,i)=>{"use strict";i.d(A,{p:()=>h,L:()=>v});const h={type:"get_logs",data:{directory:""}},v={type:"get_compressed_files",data:{files:[],compressed_files:""}}},57788:(I,A,i)=>{"use strict";i.d(A,{iS:()=>v,EX:()=>e,xA:()=>_,Cs:()=>u});var h=i(23065);const v=(0,h.PH)("[Logs] Update Logs",(0,h.Ky)()),e=(0,h.PH)("[Logs] Toggle Logs Loading Status",(0,h.Ky)()),_=(0,h.PH)("[Logs] Update Logs Requested Path",(0,h.Ky)()),u=(0,h.PH)("[Logs] Clear Logs")},38223:(I,A,i)=>{"use strict";i.d(A,{N:()=>d});var h=i(23065),v=i(57788),e=i(23815),_=i(19083),u=i(37716);let y=(()=>{class o{constructor(){}static updateLogsTree(l,g,B){var f,M;let m=B?null==B?void 0:B.split("/"):null===(M=null===(f=null==g?void 0:g[0])||void 0===f?void 0:f.fullPath)||void 0===M?void 0:M.split("/");null==m||m.pop(),this.accessChildrenAndAppend(l,g,m,(null==m?void 0:m.length)>0?0:null)}static accessChildrenAndAppend(l,g,B,f){if(null!=f&&f>=0){let M=l.findIndex(m=>m.name===B[f]);-1===M&&(l.push({name:B[f],isDir:!0,fullPath:B.slice(0,f).join("/"),children:[]}),M=l.findIndex(m=>m.name===B[f])),this.accessChildrenAndAppend(l[M].children,g,B,f=B.length-1>f?f+1:null)}else(0,_.diff)(l,g)&&l.push(...g)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const L=(0,h.Lq)({loading:!1,logs:[],requestedPath:"/"},(0,h.on)(v.iS,(o,T)=>{let l=(0,e.cloneDeep)(o.logs);return y.updateLogsTree(l,T.logs,l.length>0?null:o.requestedPath),Object.assign(Object.assign({},o),{logs:l})}),(0,h.on)(v.EX,(o,T)=>Object.assign(Object.assign({},o),{loading:T.loading})),(0,h.on)(v.xA,(o,T)=>Object.assign(Object.assign({},o),{requestedPath:T.requestedPath})),(0,h.on)(v.Cs,(o,T)=>Object.assign(Object.assign({},o),{logs:[]}))),d=(0,h.Tz)({name:"logs",reducer:L})},2031:(I,A,i)=>{"use strict";i.r(A),i.d(A,{BrakeTestTabModule:()=>bt});var h=i(38583),v=i(95987),e=i(37716);const _=[{Title:"Last brake test",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Success"},{Title:"Automatic brake test",Status:"Disabled"},{Title:"Test2",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Warn",Message:"Whoops I Slipped"},{Title:"Test3",StartDate:new Date(Date.now()-2),EndDate:new Date(Date.now()),Status:"Error",Message:"Boy you gonna need a new car"},{Title:"Test4",StartDate:new Date(Date.now()),Status:"Running"}];var u=i(3679),y=i(19083),k=i(2938),w=i(6040);const L={type:"get_brake_tests",data:{}};var d=i(23815),o=i(23065);const T=(0,o.PH)("[BrakeTest] Update Brake Test History",(0,o.Ky)()),B=(0,o.Lq)({loading:!1,brakeTestHistory:[]},(0,o.on)(T,(a,s)=>Object.assign(Object.assign({},a),{brakeTestHistory:s.brakeTestHistory}))),f=(0,o.Tz)({name:"brakeTestHistory",reducer:B}),M=(0,o.P1)(f.selectBrakeTestHistory,a=>a);var m=i(16738),O=i(70992),b=i(93898),S=i(67736),G=i(71013);let F=(()=>{class a{constructor(t,n,r,p,E){this.store=t,this.responseMW=n,this.channelsMW=r,this.linkService=p,this.logsMS=E,this.responseMW.brakeTestHistory.subscribe(R=>{var c;R&&this.setBrakeTestHistory(null===(c=null==R?void 0:R.data)||void 0===c?void 0:c.brake_test.map(x=>({id:x.id,cycle:x.cycle,result:x.result,test_at:m(x.test_at,"YYYYMMDDThhmmss").format("YYYY-MM-DD hh:mm:ss").toLocaleString(),message:x.message,bms_max_i:x.bms_max_i.toFixed(2),left_max_i:x.left_max_i.toFixed(2),right_max_i:x.right_max_i.toFixed(2)})))})}get brakeTestHistory(){return this.store.select(M)}setBrakeTestHistory(t){this.store.dispatch(T({brakeTestHistory:t.sort((n,r)=>r.id-n.id)}))}toggleBreakTest(t){this.channelsMW.toggleChannel("BrakeTestHistory",t)}downloadBrakeTestHistory(){this.logsMS.downloadLogs(["brake_tests"])}fetchBrakeTestHistory(){let t=(0,d.cloneDeep)(L);this.linkService.sendMessage(t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(o.yh),e.LFG(O.B),e.LFG(b.$),e.LFG(S.X),e.LFG(G.T))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Y=(0,o.PH)("[StaticBrakeTest] Update StaticBrakeTest",(0,o.Ky)()),C=(0,o.PH)("[StaticBrakeTest] Update StaticBrakeTest Time Interval",(0,o.Ky)()),P=(0,o.PH)("[StaticBrakeTest] Update StaticBrakeTest Error Time Threshold",(0,o.Ky)()),X=(0,o.PH)("[StaticBrakeTest] Update StaticBrakeTest Status",(0,o.Ky)()),xe=(0,o.Lq)({loading:!1,staticBrakeTest:{enabled:!1,timeInterval:null,errorTimeThreshold:""}},(0,o.on)(Y,(a,s)=>{let t=s.staticBrakeTest;return Object.assign(Object.assign({},a),{staticBrakeTest:t})}),(0,o.on)(C,(a,s)=>Object.assign(Object.assign({},a),{staticBrakeTest:Object.assign(Object.assign({},a.staticBrakeTest),{timeInterval:s.interval})})),(0,o.on)(P,(a,s)=>Object.assign(Object.assign({},a),{staticBrakeTest:Object.assign(Object.assign({},a.staticBrakeTest),{errorTimeThreshold:s.threshold})})),(0,o.on)(X,(a,s)=>Object.assign(Object.assign({},a),{staticBrakeTest:Object.assign(Object.assign({},a.staticBrakeTest),{enabled:s.status})}))),$=(0,o.Tz)({name:"staticBrakeTest",reducer:xe}),ye=(0,o.P1)($.selectStaticBrakeTest,a=>a),Be={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{start_brake_test:!0}}}}},q={type:"config",data:{request:"set",config:{"ideal_brain.static_brake_test.brake_test_checker":{brake_test_checker:{max_brake_test_time_limit_h:""}}}}},ee={type:"config",data:{request:"set",config:{"ideal_brain.static_brake_test.brake_test_checker":{brake_test_checker:{brake_test_time_interval_h:12}}}}},te={type:"config",data:{request:"set",config:{"ideal_brain.static_brake_test.brake_test_checker":{brake_test_checker:{disable_automatic_test:!0}}}}};var N=i(15257),z=i(729);let ae=(()=>{class a{constructor(t,n){this.store=t,this.linkService=n,this.store.select(z.tg).subscribe(r=>{this.updateStaticBrakeTestTimeInterval(r)}),this.store.select(z.Vc).subscribe(r=>{this.updateStaticBrakeTestErrorTimeThreshold(r)}),this.store.select(z.vf).subscribe(r=>{this.updateStaticBreakTestStatus(void 0!==r?!r:void 0)})}get staticBrakeTest(){return this.store.select(ye)}setStaticBrakeTest(t){this.store.dispatch(Y({staticBrakeTest:t}))}updateStaticBreakTestStatus(t){this.store.dispatch(X({status:t}))}updateStaticBrakeTestTimeInterval(t){this.store.dispatch(C({interval:t}))}updateStaticBrakeTestErrorTimeThreshold(t){this.store.dispatch(P({threshold:t}))}startStaticBrakeTest(t,n){let r=(0,d.cloneDeep)(Be);this.linkService.sendMessage(r),this.staticBrakeTest.pipe((0,N.q)(1)).subscribe(p=>{this.setStaticBrakeTest({enabled:p.enabled,timeInterval:t,errorTimeThreshold:n})})}submitStaticBrakeTest(t,n){ee.data.config["ideal_brain.static_brake_test.brake_test_checker"].brake_test_checker.brake_test_time_interval_h=t;let r=(0,d.cloneDeep)(ee);q.data.config["ideal_brain.static_brake_test.brake_test_checker"].brake_test_checker.max_brake_test_time_limit_h=n;let p=(0,d.cloneDeep)(q);setTimeout(()=>{this.linkService.sendMessage(r),setTimeout(()=>{this.linkService.sendMessage(p)},200)},200),this.staticBrakeTest.pipe((0,N.q)(1)).subscribe(E=>{this.setStaticBrakeTest({enabled:E.enabled,timeInterval:t,errorTimeThreshold:n})})}toggleStaticBreakTest(t){te.data.config["ideal_brain.static_brake_test.brake_test_checker"].brake_test_checker.disable_automatic_test=t;let n=(0,d.cloneDeep)(te);this.linkService.sendMessage(n),this.staticBrakeTest.pipe((0,N.q)(1)).subscribe(r=>{this.setStaticBrakeTest({enabled:!t,timeInterval:r.timeInterval,errorTimeThreshold:r.errorTimeThreshold})})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(o.yh),e.LFG(S.X))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Me=i(58011);const ne=(0,o.PH)("[DynamicBrakeTest] Update DynamicBrakeTest",(0,o.Ky)()),Ae=(0,o.Lq)({loading:!1,dynamicBrakeTest:{enabled:!1,driveSpeed:""}},(0,o.on)(ne,(a,s)=>{let t=s.dynamicBrakeTest;return Object.assign(Object.assign({},a),{dynamicBrakeTest:t})})),ie=(0,o.Tz)({name:"dynamicBrakeTest",reducer:Ae}),De=(0,o.P1)(ie.selectDynamicBrakeTest,a=>a),Ee={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{start_dynamic_brake_test:!0}}}}},we={type:"config",data:{request:"set",config:{ats_emulator:{ats_emulator:{start_mechanical_dynamic_brake_test:!0}}}}},Ce={type:"config",data:{request:"set",config:{"ideal_brain.dynamic_brake_test.drive_straight":{drive_straight:{speed:1}}}}};let oe=(()=>{class a{constructor(t,n){this.store=t,this.linkService=n}get dynamicBrakeTest(){return this.store.select(De)}setDynamicBrakeTest(t){this.store.dispatch(ne({dynamicBrakeTest:t}))}submitDynamicBrakeTest(t,n){let p,r=(0,d.cloneDeep)(Ce);r.data.config["ideal_brain.dynamic_brake_test.drive_straight"].drive_straight.speed=Number(t),p=(0,d.cloneDeep)(n?we:Ee),setTimeout(()=>{this.linkService.sendMessage(r),setTimeout(()=>{this.linkService.sendMessage(p)},200)},200)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(o.yh),e.LFG(S.X))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var He=i(39075),V=i(77093),Le=i(37963),se=i(11436),re=i(98295),le=i(49983),de=i(51095),Pe=i(65424);const Re=["brakeTestTable"];function Fe(a,s){if(1&a&&e._UZ(0,"app-data-table",16,17),2&a){const t=e.oxw(2);e.Q6J("titleText","brakeTest.brakeTestHistory.title")("columns",t.columns)("ELEMENT_DATA",t.tableData)("showReloadButton",!0)("showDownloadAllButton",!0)("downloadButtonTrigger",t.downloadBrakeTestHistory)("reloadButtonTrigger",t.reloadBrakeTestHistory)("tooltipText","brakeTest.brakeTestHistory.tooltip")}}function Ie(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"app-switch-tile",4),e.NdJ("slideAction",function(r){return e.CHM(t),e.oxw().toggleStaticBrakeTest(r)}),e.ALo(4,"transloco"),e.ALo(5,"transloco"),e.ALo(6,"transloco"),e.qZA(),e.TgZ(7,"form",5),e.TgZ(8,"mat-form-field"),e._UZ(9,"input",6),e.ALo(10,"transloco"),e.ALo(11,"transloco"),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"mat-form-field",8),e._UZ(14,"input",9),e.ALo(15,"transloco"),e.qZA(),e._UZ(16,"i",10),e.ALo(17,"transloco"),e.qZA(),e.qZA(),e.TgZ(18,"div",11),e.TgZ(19,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().startStaticBrakeTest()}),e._uU(20),e.ALo(21,"transloco"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().onStaticBrakeTestTimeValuesSubmit()}),e._uU(23),e.ALo(24,"transloco"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"app-switch-tile",14),e.NdJ("slideAction",function(r){return e.CHM(t),e.oxw().toggleDynamicBrakeTest(r)})("inputActionEmit",function(r){return e.CHM(t),e.oxw().onDynamicBrakeTestSubmit(r)}),e.ALo(27,"transloco"),e.ALo(28,"transloco"),e.ALo(29,"transloco"),e.ALo(30,"transloco"),e.ALo(31,"transloco"),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,Fe,2,8,"app-data-table",15),e.qZA()}if(2&a){const t=e.oxw();e.xp6(3),e.s9C("titleText",e.lcZ(4,22,"brakeTest.staticBrakeTest.title")),e.s9C("slideText",e.lcZ(5,24,"brakeTest.staticBrakeTest.slideText")),e.Q6J("description",t.getStaticBrakeTestDescription())("initialValue",t.initialStaticBrakeTestValue)("slideTextDisabled","Disabled")("matTooltip",e.lcZ(6,26,"brakeTest.staticBrakeTest.tooltip")),e.xp6(4),e.Q6J("formGroup",t.staticBrakeTestFormGroup),e.xp6(2),e.s9C("placeholder",e.lcZ(10,28,"brakeTest.staticBrakeTest.formGroup.field1.placeholder")),e.Q6J("matTooltip",e.lcZ(11,30,"brakeTest.staticBrakeTest.formGroup.field1.tooltip")),e.xp6(5),e.s9C("placeholder",e.lcZ(15,32,"brakeTest.staticBrakeTest.formGroup.field2.placeholder")),e.xp6(2),e.Q6J("matTooltip",e.lcZ(17,34,t.Description)),e.xp6(4),e.Oqu(e.lcZ(21,36,"brakeTest.staticBrakeTest.startTest")),e.xp6(3),e.Oqu(e.lcZ(24,38,"brakeTest.staticBrakeTest.submit")),e.xp6(3),e.s9C("titleText",e.lcZ(28,42,"brakeTest.dynamicBrakeTest.title")),e.s9C("description",e.lcZ(29,44,"brakeTest.dynamicBrakeTest.description")),e.s9C("slideText",e.lcZ(30,46,"brakeTest.dynamicBrakeTest.slideText")),e.Q6J("matTooltip",e.lcZ(27,40,"brakeTest.dynamicBrakeTest.tileTooltip"))("checkbox",!0)("inputAction",t.action)("initialValue",t.initialDynamicBrakeTestValue)("tooltipInfo",e.lcZ(31,48,t.MechanicalBreakDescription)),e.xp6(6),e.Q6J("ngIf",t.tableData)}}const Oe=[{path:"",component:(()=>{class a{constructor(t,n,r,p,E,R){this.brakeTestHistoryMS=t,this.staticBrakeTestMS=n,this.notificationBarMs=r,this.dynamicBrakeTestMS=p,this.sanitizer=E,this.translocoService=R,this.attemptedBrakeTests=_,this.subscriptions=[],this.initialStaticBrakeTestValue=void 0,this.initialDynamicBrakeTestValue=void 0,this.Description="brakeTest.staticBrakeTest.formGroup.field2.tooltip",this.MechanicalBreakDescription="brakeTest.dynamicBrakeTest.tooltip",this.staticBrakeTestFormGroup=new u.cw({timeInterval:new u.NI("",[u.kI.required,u.kI.min(0)]),errorTimeThreshold:new u.NI("",[u.kI.required])}),this.columns=[{id:"id",name:"brakeTest.brakeTestHistory.columns.id.name",tooltip:"brakeTest.brakeTestHistory.columns.id.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"cycle",name:"brakeTest.brakeTestHistory.columns.cycle.name",tooltip:"brakeTest.brakeTestHistory.columns.cycle.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"result",name:"brakeTest.brakeTestHistory.columns.result.name",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>{let x="";return this.translocoService.selectTranslate("brakeTestHistory.status."+(c?"success":"failure"),{},"modules/pages/system-panel/brake-test").subscribe(H=>{x=H}),x},badgeBackgroundColorRule:c=>!0===c?"#DEFFEE":"#FFDEDE"}},{id:"time",name:"brakeTest.brakeTestHistory.columns.time.name",tooltip:"brakeTest.brakeTestHistory.columns.time.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"message",name:"brakeTest.brakeTestHistory.columns.message.name",tooltip:"brakeTest.brakeTestHistory.columns.message.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"bms_max_i",name:"brakeTest.brakeTestHistory.columns.bmsMaxI.name",tooltip:"brakeTest.brakeTestHistory.columns.bmsMaxI.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"left_max_i",name:"brakeTest.brakeTestHistory.columns.leftMaxI.name",tooltip:"brakeTest.brakeTestHistory.columns.leftMaxI.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}},{id:"right_max_i",name:"brakeTest.brakeTestHistory.columns.rightMaxI.name",tooltip:"brakeTest.brakeTestHistory.columns.rightMaxI.tooltip",badge:{badgeCell:!0,badgeColorRule:c=>"#425466",badgeValueRule:c=>c,badgeBackgroundColorRule:c=>"transparent"}}],this.tableData=[],this.action={input:null,inputPlaceholder:"brakeTest.dynamicBrakeTest.inputAction.inputPlaceholder",button:"brakeTest.dynamicBrakeTest.inputAction.button",trigger(){}},this.reloadBrakeTestHistory=()=>{this.brakeTestHistoryMS.fetchBrakeTestHistory()},this.downloadBrakeTestHistory=()=>{this.brakeTestHistoryMS.downloadBrakeTestHistory()}}toggleStaticBrakeTest(t){this.initialStaticBrakeTestValue=t,this.staticBrakeTestMS.toggleStaticBreakTest(!t)}onStaticBrakeTestTimeValuesSubmit(){this.staticBrakeTestMS.submitStaticBrakeTest(this.staticBrakeTestFormGroup.controls.timeInterval.value,this.staticBrakeTestFormGroup.controls.errorTimeThreshold.value)}startStaticBrakeTest(){this.staticBrakeTestMS.startStaticBrakeTest(this.staticBrakeTestFormGroup.controls.timeInterval.value,this.staticBrakeTestFormGroup.controls.errorTimeThreshold.value)}toggleBrakeTestChannel(t){this.brakeTestHistoryMS.toggleBreakTest(t)}toggleDynamicBrakeTest(t){this.initialDynamicBrakeTestValue=t}onDynamicBrakeTestSubmit(t){this.dynamicBrakeTestMS.submitDynamicBrakeTest(t,this.initialDynamicBrakeTestValue)}ngOnInit(){this.subscriptions.push(this.staticBrakeTestMS.staticBrakeTest.subscribe(t=>{t&&(this.initialStaticBrakeTestValue=t.enabled,this.staticBrakeTestFormGroup.controls.errorTimeThreshold.setValue(t.errorTimeThreshold),this.staticBrakeTestFormGroup.controls.timeInterval.setValue(t.timeInterval))}),this.dynamicBrakeTestMS.dynamicBrakeTest.subscribe(t=>{t&&(this.initialDynamicBrakeTestValue=t.enabled,this.action.input=t.driveSpeed)}),this.brakeTestHistoryMS.brakeTestHistory.subscribe(t=>{var n;let r=null==t?void 0:t.map((p,E)=>({id:p.id,cycle:p.cycle,result:p.result,time:p.test_at,message:p.message,bms_max_i:p.bms_max_i,left_max_i:p.left_max_i,right_max_i:p.right_max_i}));(0,y.diff)(this.tableData,r)&&(this.tableData=r,null===(n=this.brakeTestTable)||void 0===n||n.setTableData(this.tableData))})),this.notificationBarMs.addNotificationBar({id:"brakeTestWarning",closable:!0,content:"notificationBar.brakeTest.brakeTestWarning.content",severity:k.l.WARNING}),this.toggleBrakeTestChannel(!0),this.brakeTestHistoryMS.fetchBrakeTestHistory()}ngAfterViewInit(){}getStaticBrakeTestDescription(){let t="";return this.translocoService.selectTranslate("staticBrakeTest.description",{value:this.staticBrakeTestFormGroup.controls.timeInterval.value},"modules/pages/system-panel/brake-test").subscribe(n=>{t=n}),this.sanitizer.sanitize(e.q3G.HTML,t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.toggleBrakeTestChannel(!1),this.notificationBarMs.removeNotificationBar("brakeTestWarning")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F),e.Y36(ae),e.Y36(Me.Y),e.Y36(oe),e.Y36(He.H7),e.Y36(w.Vn))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-device-identity-tab"]],viewQuery:function(t,n){if(1&t&&e.Gf(Re,5),2&t){let r;e.iGM(r=e.CRH())&&(n.brakeTestTable=r.first)}},features:[e._Bn([{provide:w.Hn,useValue:{scope:"modules/pages/system-panel/brake-test",alias:"brakeTest"}}])],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutGap","16px","class","outer-div-padding","style","height: 100%; color: black;overflow: auto",4,"ngIf"],["fxLayout","column","fxLayoutGap","16px",1,"outer-div-padding",2,"height","100%","color","black","overflow","auto"],["fxLayout","row wrap","fxLayoutGap.gt-sm","30px",2,"width","100%"],["fxFlex.sm","100","fxLayoutGap","16px",1,"page-components","card-max-360","full-width-mobile"],[3,"titleText","description","slideText","initialValue","slideTextDisabled","matTooltip","slideAction"],["fxLayout","column",3,"formGroup"],["matInput","","type","number","formControlName","timeInterval",3,"placeholder","matTooltip"],["fxFlex","row","fxLayoutGap","16px","fxLayoutAlign","center center"],["fxFlex","start"],["matInput","","type","number","formControlName","errorTimeThreshold",3,"placeholder"],["fxLayoutAlign","end",1,"bi","bi-info-circle-fill",2,"cursor","pointer",3,"matTooltip"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-flat-button","","color","accent",3,"click"],["fxFlex.sm","100",1,"page-components","card-max-360","full-width-mobile"],[3,"matTooltip","titleText","description","checkbox","inputAction","slideText","initialValue","tooltipInfo","slideAction","inputActionEmit"],[3,"titleText","columns","ELEMENT_DATA","showReloadButton","showDownloadAllButton","downloadButtonTrigger","reloadButtonTrigger","tooltipText",4,"ngIf"],[3,"titleText","columns","ELEMENT_DATA","showReloadButton","showDownloadAllButton","downloadButtonTrigger","reloadButtonTrigger","tooltipText"],["brakeTestTable",""]],template:function(t,n){1&t&&e.YNc(0,Ie,33,50,"div",0),2&t&&e.Q6J("ngIf",null!=n.initialStaticBrakeTestValue)},directives:[h.O5,V.xw,V.SQ,V.yH,Le.s,se.gM,u._Y,u.JL,u.sg,re.KE,le.Nt,u.wV,u.Fj,u.JJ,u.u,V.Wh,de.lW,Pe.Q],pipes:[w.Ot],styles:[""]}),a})()},{path:"**",redirectTo:""}];let Ge=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[v.Bz.forChild(Oe)],v.Bz]}),a})();var Ze=i(69904),Ye=i(22685);let Ne=(()=>{class a{constructor(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Ve=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[Ne,ae,oe,F],imports:[[h.ez,o.Aw.forFeature(ie),o.Aw.forFeature($),o.Aw.forFeature(f)]]}),a})();var je=i(73059),Ue=i(1769),ze=i(77746),Je=i(27909);i(39490),i(79765),i(75319),i(38345);let qe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({}),a})();var Q=i(87636),ue=i(72458);i(19238),i(87519),i(39761),i(45435),i(36461),i(46237),i(59193),i(66682),i(17238);let ft=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[h.ez,ue.BQ,qe,Q.eL]]}),a})(),bt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[h.ez,Ge,Ze.A,Ye.t,Ve,je.i,re.lN,u.u5,u.UX,Ue.t,ze.ie,Je.o9,ft,le.c,de.ot,se.AV,w.y4]]}),a})()}}]);